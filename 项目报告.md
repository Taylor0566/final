# 深圳大学课程项目报告

**课程名称：** Web开发及人机交互导论  
**项目名称：** 期末大作业-校园活动管理平台  
**学院：** 计算机与软件学院  
**专业：** 计算机科学与技术（卓越班）  
**任课教师：** 李俊杰  
**报告人：** 梁升富  
**学号：** 2023152006  
**提交时间：** 2025.12.31  

---

## 摘要

本项目旨在设计并实现一个功能全面、交互友好的“校园活动管理平台”。平台以服务全校师生为核心，围绕活动的发布、发现、参与和管理四大环节，构建了一个完整的信息闭环。主要功能涵盖：一个动态更新、支持分类筛选与关键词搜索的**活动中心**；集图文介绍、在线报名、收藏、评论互动、扫码分享及日历（ICS）导出于一体的**活动详情页**；一个让用户可以方便地查看和管理自己已报名、已收藏活动的**个人中心**；基于 ECharts 实现的，从多个维度（如活动类型分布、热度趋势、主办方排行等）对校园活动数据进行可视化分析的**统计看板**；以及直观展示每日活动的**活动日历**和用于收集用户建议的**意见反馈**系统。

为了在传统多页面应用（MPA）架构下实现流畅的类单页面应用（SPA）体验，项目巧妙地运用 `localStorage` 进行状态持久化，确保了用户登录信息、活动数据在页面跳转间的无缝传递。项目整体采用响应式布局设计，兼容桌面和移动设备，并通过统一的导航栏和集中的脚本管理，保证了代码的模块化与可维护性。

---

## 1．网页页面结构规划与内容设计

项目的设计初心是打造一个信息清晰、操作便捷、体验流畅的校园活动门户。为此，我们对平台的整体结构和每个页面的内容进行了细致的规划。

*   **统一的顶部导航栏**：这是贯穿整个平台的主动脉。我们将其设计为固定在页面顶部，包含了“首页”、“活动日历”、“发布活动”、“统计分析”、“意见反馈”和“个人中心”等核心功能入口。这样的设计确保了用户无论身处哪个页面，都能快速、明确地跳转到目标模块，提供了稳定、一致的导航预期。在移动端，该导航栏会智能地折叠成一个汉堡菜单，以节省宝贵的屏幕空间。

*   **首页 (`index.html`)**：作为平台的门面，首页的设计重点是“引导”和“发现”。
    *   **内容设计**：页面顶部是醒目的**滚动宣传卡片**，用于推广精选或热门活动。紧接着是**分类筛选器**，允许用户按“学术”、“艺术”、“体育”等类别快速过滤感兴趣的内容。页面的核心是**活动网格**，以卡片形式直观展示活动海报、标题和基本信息。搜索框具备**实时搜索建议**功能，用户输入关键词时，会动态匹配并展示相关活动，极大地提升了搜索效率。
    *   **结构规划**：我们采用“上中下”的经典布局，顶部导航，中部核心内容，底部页脚。这种结构符合大多数用户的浏览习惯，逻辑清晰，重点突出。

*   **活动详情页 (`detail.html`)**：这是用户深入了解和参与活动的“最后一公里”，设计重点是“详尽”与“互动”。
    *   **内容设计**：页面以大尺寸的**活动海报**作为视觉焦点。主体部分详细展示了活动的**基本信息**（时间、地点、主办方）、丰富的**图文详情**、以及一个开放的**评论区**。核心交互功能包括**“立即报名”**和**“收藏”**按钮。此外，我们还加入了**二维码分享**和**ICS日历文件导出**功能，方便用户将活动分享给朋友或添加到自己的日程管理工具中。
    *   **结构规划**：采用左侧信息展示、右侧操作面板（或上下布局）的结构，让用户在阅读详情的同时，可以随时进行报名、收藏等操作。

*   **活动发布页 (`publish.html`)**：为活动组织者设计，重点是“便捷”和“规范”。页面提供了一个结构化的**表单**，引导用户逐项填写活动标题、时间、地点、类型、人数限制、主办方和详细介绍等所有必要信息，确保了平台活动信息的完整性和一致性。

*   **统计分析页 (`stats.html`)**：这是一个数据驱动的决策支持模块。我们选用强大的 ECharts 图表库，将后台数据转化为直观的**可视化图表**，包括：分析各类活动占比的**饼图**、展示活动发布数量变化的**折线图**、对比不同主办方活动数量的**柱状图**，以及综合评估活动各项指标的**雷达图**。

*   **活动日历页 (`calendar.html`)**：提供一个以“月”为单位的**日历视图**。用户可以直观地看到整个月中哪些天有活动，点击具体日期，下方会联动展示当日的所有活动列表，为用户的长期规划提供了便利。

*   **意见反馈页 (`feedback.html`)**：为了提升用户体验，我们设计了一个**卡片化**的反馈表单，视觉上更轻盈、友好。表单包含**分段式问题类型选择**、标题、详细描述和联系方式输入框。提交按钮固定在页脚，无论用户在页面的哪个位置，都能方便地完成提交。

*   **个人中心 (`profile.html`)**：用户的专属空间。页面顶部是可自定义的**封面和个人信息**，下方通过标签页（Tabs）清晰地划分了**“我的活动”**（已报名）、**“我的收藏”**和**“我的动态”**等模块，方便用户追踪和管理与自己相关的活动。

---

## 2．网页的实现（结构化重写）

本部分按“结构 + CSS样式 + 功能实现”的统一格式，对各主要页面进行系统性阐述与代码展示。为保证可读性与复用性，所有示例均围绕项目现有的 `index.html`、`detail.html`、`publish.html`、`stats.html`、`calendar.html`、`feedback.html`、`profile.html` 以及统一的 `assets/app.js` 与 `assets/styles.css` 展开。

### 2.1、全局架构与初始化

#### 2.1.1、结构（不少于100字）
全局架构以轻量的多页面应用为基础，通过一个核心脚本 `assets/app.js` 管理视图枚举、导航映射与状态持久化。页面的 `<body>` 使用 `data-page` 标记当前视图，初始化时根据该标记分派至相应的渲染函数（如 `renderHome`、`renderDetail` 等）。状态层使用 `localStorage` 记录活动数组与当前用户对象，避免跨页丢失。导航层采用统一的 `navigate(view, params)` 抽象，屏蔽不同页面间的跳转细节并在跳转前写入持久化状态，保证数据一致。该结构既保持了多页的直观与简单，又在交互体验上接近单页应用的连续与顺畅。

对应代码：

```javascript
// 视图枚举与导航映射
var ViewState={HOME:'HOME',DETAIL:'DETAIL',PUBLISH:'PUBLISH',STATS:'STATS',CALENDAR:'CALENDAR',FEEDBACK:'FEEDBACK',PROFILE:'PROFILE',LOGIN:'LOGIN',REGISTER:'REGISTER'};
var LS_EVENTS_KEY='campushub_events';
var LS_USER_KEY='campushub_user';
var events=[]; var currentUser=null; var filter='all'; var searchTerm='';

function navigate(view,params){
  var map={HOME:'index.html',DETAIL:'detail.html',PUBLISH:'publish.html',STATS:'stats.html',CALENDAR:'calendar.html',FEEDBACK:'feedback.html',PROFILE:'profile.html',LOGIN:'login.html',REGISTER:'register.html'};
  var url=map[view]||'index.html';
  if(view===ViewState.DETAIL && params && params.id){ url+='?id='+encodeURIComponent(params.id); }
  saveUser(); saveEvents(); window.location.href=url;
}

function init(){ loadState(); bindNav(); var page=$('body').data('page')||ViewState.HOME; switch(page){ case ViewState.HOME: renderHome(); break; case ViewState.DETAIL: renderDetail(); break; case ViewState.STATS: renderStats(); break; case ViewState.CALENDAR: renderCalendar(); break; case ViewState.PUBLISH: renderPublish(); break; case ViewState.FEEDBACK: renderFeedback(); break; case ViewState.PROFILE: renderProfile(); break; }}
$(init);
```

#### 2.1.2、CSS样式（不少于100字）
全局样式以 Bootstrap 5 的栅格体系为基础，自定义层聚焦色彩体系、圆角与阴影统一、玻璃拟态的微透明背景等视觉特征。`assets/styles.css` 中对卡片、徽章、输入框与建议下拉做了统一规范，保证不同页面间的视觉一致性与组件复用性。通过设置 `:root` 变量与基础排版（字体、行高、标题尺寸）实现全站风格调优；在导航、横幅与卡片等关键区域引入柔和阴影与过渡动效，既增强层次又避免突兀，兼顾桌面与移动端的观感与可点击性。

对应代码：

```css
:root{--brand:#0071e3;--text:#111;--muted:#6b7280;--card:#fff;--bg:#f5f5f7}
body{background:var(--bg);color:var(--text);font-synthesis-weight: none}
.btn-pill{border-radius:999px}
.shadow-soft{box-shadow:0 10px 24px rgba(0,0,0,.08)}
.no-scrollbar{scrollbar-width:none}
.no-scrollbar::-webkit-scrollbar{display:none}
```

#### 2.1.3、功能实现（不少于100字）
功能层的核心是状态读写与统一导航。`loadState()` 在应用启动时读取 `localStorage`，将活动与用户信息映射到内存；`saveEvents()` 与 `saveUser()` 在每次数据变化后立即写回，以防页面跳转造成数据丢失。`bindNav()` 统一绑定导航元素，通过读取 `data-view` 和可选 `data-anchor` 实现跨页跳转与锚点定位；同时为移动端菜单、页脚入口与功能按钮做事件分派。该分层设计使渲染函数只专注视图生成与交互逻辑，从而提升代码的可维护性和扩展性。

对应代码：

```javascript
function loadState(){ try{ var es=localStorage.getItem(LS_EVENTS_KEY); if(es){ events=JSON.parse(es);} var us=localStorage.getItem(LS_USER_KEY); if(us){ currentUser=JSON.parse(us);} }catch(e){ console.error('loadState failed',e);} }
function saveEvents(){ try{ localStorage.setItem(LS_EVENTS_KEY, JSON.stringify(events)); }catch(e){ console.error('saveEvents failed',e);} }
function saveUser(){ try{ if(currentUser){ localStorage.setItem(LS_USER_KEY, JSON.stringify(currentUser)); } else { localStorage.removeItem(LS_USER_KEY);} }catch(e){ console.error('saveUser failed',e);} }
function bindNav(){ $('.nav-item').off().on('click',function(){ var v=$(this).data('view'); var anchor=$(this).data('anchor'); if(anchor==='activities'){ navigate(ViewState.HOME,{anchor:'activities'});} else { navigate(v);} }); $('#mobile-menu-btn').off().on('click',function(){ $('#mobile-menu').toggleClass('d-none'); }); }
```

### 2.2、首页实现（index.html）

#### 2.2.1、导航栏

##### 2.2.1.1、结构（不少于100字）
首页导航栏采用固定顶部的双层结构，上层为品牌与主入口，下层为移动端的折叠菜单容器。桌面端通过 `flex` 将品牌、功能入口、搜索与认证区横向排布；移动端以汉堡按钮切换显示 `#mobile-menu`，复用同一套 `data-view` 约定，实现一处绑定、全站可用。搜索输入与建议下拉置于导航右侧的相对定位容器中，保证建议浮层对齐输入框。该结构既保证了多页面间的统一导航体验，又通过响应式隐藏与展开在不同屏幕宽度下提供合理的空间分配。

对应代码（HTML）：

```html
<nav class="nav-dark sticky-top">
  <div class="container d-flex align-items-center justify-content-between py-2">
    <div class="d-flex align-items-center"><span class="brand">CampusHub</span></div>
    <div class="d-none d-md-flex align-items-center gap-3">
      <span class="nav-item" data-view="HOME">首页</span>
      <span class="nav-item" data-view="CALENDAR">日历</span>
      <span class="nav-item" data-view="PUBLISH">发布</span>
      <span class="nav-item" data-view="STATS">统计</span>
      <span class="nav-item" data-view="FEEDBACK">反馈</span>
      <span class="nav-item" data-view="PROFILE">个人中心</span>
    </div>
    <div class="d-none d-md-flex align-items-center gap-3">
      <div class="position-relative" id="search-wrapper">
        <input id="search-input" class="search-input" type="text" placeholder="搜索活动..." />
        <div id="search-suggest" class="suggest-dropdown d-none"></div>
      </div>
      <div id="auth-area" class="d-flex align-items-center gap-2"></div>
    </div>
    <button class="btn btn-link text-light d-md-none" id="mobile-menu-btn">☰</button>
  </div>
  <div id="mobile-menu" class="d-md-none mobile-menu d-none">
    <div class="container py-3">
      <div class="mb-3">
        <input id="m-search-input" class="search-input w-100" type="text" placeholder="搜索活动..." />
      </div>
      <div class="d-flex flex-column gap-3">
        <span class="nav-item" data-view="HOME">首页</span>
        <span class="nav-item" data-view="CALENDAR">日历</span>
        <span class="nav-item" data-view="HOME" data-anchor="activities">活动列表</span>
        <span class="nav-item" data-view="PUBLISH">发布</span>
        <span class="nav-item" data-view="STATS">统计</span>
        <span class="nav-item" data-view="FEEDBACK">反馈</span>
        <span class="nav-item" data-view="PROFILE">个人中心</span>
      </div>
      <div class="pt-3 border-top"><div id="m-auth-area" class="d-flex flex-column gap-2"></div></div>
    </div>
  </div>
  </nav>
```

##### 2.2.1.2、CSS样式（不少于100字）
导航区采用半透明暗色背景与玻璃拟态输入框，使品牌与操作元素保持高对比度与良好可读性。通过 `position:sticky` 固定导航栏于顶部，提升跨段浏览的可达性；输入框使用圆角与浅白边框，建议浮层采用模糊与轻边框提高层次感而不打断阅读。移动端菜单容器设置淡入淡出与折叠样式，结合 `border-top` 分隔引导用户识别菜单区与内容区，确保在小屏上信息不拥挤、触点不密集。

对应代码（CSS）：

```css
.nav-dark{background:rgba(0,0,0,.6);backdrop-filter:blur(8px)}
.brand{color:#fff;font-weight:800;letter-spacing:.02em}
.search-input{padding:.4rem .8rem .4rem 2rem;border-radius:999px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.12);color:#fff}
.suggest-dropdown{position:absolute;top:110%;left:0;right:0;background:rgba(255,255,255,.08);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.16);border-radius:16px;overflow:hidden}
.suggest-item{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;color:#fff;cursor:pointer}
.suggest-item:hover{background:rgba(255,255,255,.14)}
.mobile-menu{background:rgba(0,0,0,.7);border-top:1px solid rgba(255,255,255,.2)}
```

##### 2.2.1.3、功能实现（不少于100字）
导航功能统一绑定于 `bindNav()`，通过读取导航项的 `data-view` 与可选 `data-anchor` 实现页面跳转与锚点定位；同时汉堡按钮切换移动端菜单的显示与隐藏。搜索输入在 `focus` 与 `input` 事件上调用 `updateSearchInput()` 实时计算建议；点击建议项会触发详情页跳转并关闭浮层，避免残留状态影响后续交互。该设计确保桌面与移动端的行为一致，降低重复代码与维护成本，并通过统一入口提升用户对功能位置的心智模型。

对应代码（JS）：

```javascript
function bindNav(){
  $('.nav-item').off().on('click',function(){ var v=$(this).data('view'); var anchor=$(this).data('anchor'); if(anchor==='activities'){ navigate(ViewState.HOME,{anchor:'activities'});} else { navigate(v);} });
  $('#mobile-menu-btn').off().on('click',function(){ $('#mobile-menu').toggleClass('d-none'); });
  $('#search-input').on('focus input',function(){ searchTerm=$(this).val(); updateSearchInput(); });
  $('#m-search-input').on('input',function(){ searchTerm=$(this).val(); setTimeout(function(){ navigate(ViewState.HOME); },0); });
}
```

#### 2.2.2、大屏（Hero）

##### 2.2.2.1、结构（不少于100字）
大屏区域采用三层叠加结构：底层为全屏背景图，中层为纵向渐变遮罩，上层为居中的标题、说明与主按钮。该设计通过遮罩提升文字的对比度与可读性，同时保留背景图的情绪化表达；按钮作为主行动引导用户滚动或跳转到活动列表。容器使用 `min-height` 保证在不同视口高度下的稳定呈现，并通过 `text-center` 与适配的分行控制在移动端保持良好的布局比例。

对应代码（HTML）：

```html
<div class="hero">
  <img class="hero-bg" src="assets/img/hero-bg.jpg" alt="" />
  <div class="hero-overlay"></div>
  <div class="container text-center hero-content">
    <h1 class="hero-title">校园生活，<br class="d-md-none" />从此不同。</h1>
    <p class="hero-sub">探索数百个精彩活动，结识志同道合的伙伴。CampusHub 为你连接无限可能。</p>
    <button class="btn btn-light btn-lg rounded-pill fw-semibold" id="btn-explore">开始探索</button>
  </div>
</div>
```

##### 2.2.2.2、CSS样式（不少于100字）
横幅样式通过绝对定位与半透明渐变构成层次，`hero-bg` 覆盖全屏并降低不透明度以避免视觉冲突；`hero-overlay` 采用由深到浅的线性渐变，过渡到页面背景，确保文字在不同背景下均可读。标题使用加粗与负字距，制造强烈的吸引力；副文限制最大宽度提升可读性。整体采用柔和的过渡与阴影，兼顾品质与性能，避免过度动画造成的渲染负担。

对应代码（CSS）：

```css
.hero{position:relative;min-height:70vh;overflow:hidden;background:#000}
.hero-bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.7}
.hero-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.6),transparent,#f5f5f7)}
.hero-content{position:relative;padding-top:10vh;padding-bottom:10vh}
.hero-title{color:#fff;font-weight:800;letter-spacing:-.01em;font-size:calc(2rem + 2vh);margin-bottom:1rem}
.hero-sub{color:#ddd;font-size:1.1rem;max-width:52ch;margin:0 auto 1rem}
```

##### 2.2.2.3、功能实现（不少于100字）
功能层为主按钮绑定滚动行为，将视图平滑滚动至“热门活动”容器，形成从横幅到内容的自然引导；在某些移动设备上，横幅高度有限，滚动能有效降低首屏跳出。为保证行为可复用，滚动逻辑通过选择器获取目标元素并执行 `scrollIntoView`。该实现简单直接且无外部依赖，保持良好的跨浏览器兼容性。

对应代码（JS）：

```javascript
$('#btn-explore').off().on('click',function(){ var el=document.getElementById('activities'); if(el){ el.scrollIntoView({behavior:'smooth'});} });
```

#### 2.2.3、搜索与联想

##### 2.2.3.1、结构（不少于100字）
搜索由输入框与建议下拉组成，二者包含于相对定位的包裹容器中，确保建议浮层相对输入框居中展开。建议项包含缩略图与文字，便于用户快速定位并识别结果来源。移动端另设独立输入框，输入后将轻跳转到首页刷新渲染，实现端内一致的提示行为。该结构保证了在不同场景下的易用性与一致性，降低用户的学习成本。

对应代码（HTML）：

```html
<div class="position-relative" id="search-wrapper">
  <input id="search-input" class="search-input" type="text" placeholder="搜索活动..." />
  <div id="search-suggest" class="suggest-dropdown d-none"></div>
</div>
```

##### 2.2.3.2、CSS样式（不少于100字）
输入框采用玻璃拟态风格以融入导航背景，圆角与内边距提升可点击性，浅色文字确保在暗色背景下的可读。建议下拉使用模糊与浅边框以提示层级关系；建议项设置紧凑的行高与左右缩进，Hover 时加深背景实现视觉反馈。整体遵循低饱和度与轻对比的设计策略，避免干扰用户的主流程并保持视觉的现代感。

对应代码（CSS）：

```css
.search-input{padding:.4rem .8rem .4rem 2rem;border-radius:999px;border:1px solid rgba(255,255,255,.2);background:rgba(255,255,255,.12);color:#fff}
.suggest-dropdown{position:absolute;top:110%;left:0;right:0;background:rgba(255,255,255,.08);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.16);border-radius:16px;overflow:hidden}
.suggest-item{display:flex;align-items:center;gap:.5rem;padding:.5rem .75rem;color:#fff;cursor:pointer}
.suggest-item:hover{background:rgba(255,255,255,.14)}
```

##### 2.2.3.3、功能实现（不少于100字）
`updateSearchInput()` 在输入事件上读取关键字，按标题与类别进行模糊匹配，最多返回五条建议，并渲染至浮层。点击建议项后直接导航至详情页，并清空输入、隐藏建议层，避免状态残留影响后续搜索。该函数与 `bindSearch()` 配合使用，后者负责外部点击关闭与移动端联动，确保搜索体验流畅与一致。

对应代码（JS）：

```javascript
function updateSearchInput(){
  var term=searchTerm.toLowerCase();
  var list=events.filter(function(e){ return e.title.toLowerCase().indexOf(term)>-1||e.category.toLowerCase().indexOf(term)>-1; }).slice(0,5);
  var box=$('#search-suggest'); box.empty();
  if(term && list.length){ list.forEach(function(e){ var it=$('<div class="suggest-item"></div>'); it.append('<img src="'+e.imageUrl+'" width="40" height="28" style="object-fit:cover;border-radius:6px">'); it.append('<div class="small">'+e.title+'</div>'); it.on('click',function(){ navigate(ViewState.DETAIL,{id:e.id}); box.addClass('d-none'); $('#search-input').val(''); }); box.append(it); }); box.removeClass('d-none'); }
  else{ box.addClass('d-none'); }
}
```

#### 2.2.4、分类筛选与活动网格

##### 2.2.4.1、结构（不少于100字）
活动区域由标题栏、分类按钮区与栅格网格组成。分类按钮在桌面端横向排列、移动端支持水平滚动，按钮文本统一为“全部/学术/艺术/体育/社交”。下方使用响应式行列布局呈现卡片，每张卡片包含海报、标题与元信息，并支持点击导航到详情页。该结构保证了信息的快速浏览与选择，配合筛选按钮提供低摩擦的探索路径。

对应代码（HTML）：

```html
<div class="container my-4" id="activities">
  <div class="d-flex flex-column flex-md-row align-items-center justify-content-between mb-3">
    <h2 class="fw-bold">热门活动</h2>
    <div class="d-flex gap-2 overflow-auto no-scrollbar" id="category-filter"></div>
  </div>
  <div class="row g-4" id="event-grid"></div>
</div>
```

##### 2.2.4.2、CSS样式（不少于100字）
活动卡片采用圆角与柔和阴影，悬停态下图片轻微缩放以提升生动性，右上角类别徽章用于快速识别类型。元信息使用较小字号与次级颜色呈现日期、地点与报名数，提高信息密度但不喧宾夺主。分类按钮采用胶囊形态与明暗双态，激活时使用深色提高选择感，保持视觉的一致与可达性。

对应代码（CSS）：

```css
.card-evt{background:#fff;border-radius:20px;border:1px solid #eee;overflow:hidden;transition:.3s transform,.3s box-shadow}
.card-evt:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(0,0,0,.1)}
.card-evt-img{height:190px;overflow:hidden;position:relative}
.card-evt-img img{width:100%;height:100%;object-fit:cover;transition:transform .6s}
.card-evt:hover .card-evt-img img{transform:scale(1.06)}
.badge-cat{position:absolute;top:.5rem;right:.5rem;background:rgba(255,255,255,.9);padding:.25rem .5rem;border-radius:8px;font-weight:700;color:var(--brand);font-size:.75rem}
.evt-meta{font-size:.9rem;color:#6b7280}
.evt-meta .dot{margin:0 .5rem}
```

##### 2.2.4.3、功能实现（不少于100字）
`renderHome()` 负责生成分类按钮与活动卡片，过滤逻辑以关键字匹配（标题/描述）与类别条件组合，提升搜索与筛选的一致性。无结果时显示占位提示，避免空白页面造成的困惑。卡片点击后调用 `navigate(ViewState.DETAIL,{id})` 跳转至详情页，保持探索路径的连贯。该函数在分类切换与搜索输入变化后复用调用，确保视图与数据的即时同步。

对应代码（JS）：

```javascript
function renderHome(){
  var cf=$('#category-filter'); cf.empty();
  ['all','academic','arts','sports','social'].forEach(function(cat){ var txt=cat==='all'?'全部':cat==='academic'?'学术':cat==='arts'?'艺术':cat==='sports'?'体育':'社交'; var active=filter===cat; var btn=$('<button class="btn btn-pill '+(active?'btn-dark':'btn-light')+'"></button>'); btn.text(txt); btn.on('click',function(){ filter=cat; renderHome(); }); cf.append(btn); });
  var grid=$('#event-grid'); grid.empty();
  var term=searchTerm.toLowerCase();
  var filtered=events.filter(function(e){ var m=e.title.toLowerCase().indexOf(term)>-1||e.description.toLowerCase().indexOf(term)>-1; var c=filter==='all'||e.category===filter; return m&&c; });
  if(filtered.length===0){ grid.append('<div class="col-12"><div class="text-center text-secondary py-5">没有找到相关活动</div></div>'); }
  else{ filtered.forEach(function(event){ var col=$('<div class="col-12 col-sm-6 col-lg-3"></div>'); var card=$('<div class="card-evt"></div>'); var img=$('<div class="card-evt-img"><img src="'+event.imageUrl+'"><div class="badge-cat">'+event.category.toUpperCase()+'</div></div>'); var body=$('<div class="p-3"></div>'); body.append('<h6 class="fw-semibold mb-2">'+event.title+'</h6>'); body.append('<div class="evt-meta">'+new Date(event.date).toLocaleDateString()+'<span class="dot">•</span>'+event.location+'<span class="dot">•</span>'+event.attendees+' / '+event.maxAttendees+' 已报名</div>'); card.append(img).append(body); card.on('click',function(){ navigate(ViewState.DETAIL,{id:event.id}); }); col.append(card); grid.append(col); }); }
}
```

#### 2.2.5、精选滑动区

##### 2.2.5.1、结构（不少于100字）
精选区以标题与连续轨道组合呈现活动照片走马灯。轨道容器采用内联块布局，使卡片并排无断点，确保动画过程中无换行；每个卡片使用固定尺寸与圆角容器包裹图片，统一对齐与裁剪。该结构通过最小的DOM复杂度实现稳定的连贯滚动，兼顾性能与视觉表现。

对应代码（HTML）：

```html
<div class="slider-wrap bg-apple-gray py-4">
  <h2 class="text-center fw-bold mb-3">精选活动瞬间</h2>
  <div class="slider-track" id="continuous-slider"></div>
</div>
```

##### 2.2.5.2、CSS样式（不少于100字）
滑动区通过 `@keyframes` 实现匀速平移，`slider-track` 设置 `white-space:nowrap` 防止内容换行，卡片采用左右留白与柔和阴影形成节奏感。动画速度设定在 30–40s 之间，以兼顾可读性与沉浸感；整体样式遵循首页的中性灰背景与圆角系统，保持统一的设计语言与轻盈的动效特征。

对应代码（CSS）：

```css
.slider-wrap{overflow:hidden}
.slider-track{white-space:nowrap;animation:scroll 40s linear infinite}
.slider-card{display:inline-block;padding:0 1rem}
@keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
```

##### 2.2.5.3、功能实现（不少于100字）
功能层将素材数组复制拼接三倍以避免轨道尾端空白，并按序渲染到轨道容器。每张卡片包裹图片并设置裁剪，保证各种比例素材的视觉一致。该实现简单可靠、可轻易替换素材来源（如从活动列表动态抽取热度最高的图片），并保留进一步引入可拖动或暂停交互的扩展空间。

对应代码（JS）：

```javascript
var track=$('#continuous-slider'); track.empty(); var display=promos.concat(promos).concat(promos);
display.forEach(function(src){ var card=$('<div class="slider-card"></div>'); card.append('<div class="rounded-2xl shadow-soft" style="width:22rem;height:13rem;overflow:hidden"><img src="'+src+'" style="width:100%;height:100%;object-fit:cover"></div>'); track.append(card); });
```

### 2.3、活动详情实现（detail.html）

#### 2.3.1、英雄图与返回

##### 2.3.1.1、结构（不少于100字）
详情页顶部以全宽英雄图承载活动主题氛围，左上角设置“返回列表”按钮，底部叠加标题、类别徽章与时间地点信息，确保用户在第一屏即可获取关键要素。英雄图层与信息层分离，便于在不同屏幕高度下保持对齐与可读性；该结构短路径传达核心信息并提供明显的返回动作，降低用户迷航与二次定位成本。

对应代码（HTML/JS）：

```javascript
var wrap=$('#detail-container'); wrap.empty();
var hero=$('<div class="detail-hero"></div>');
hero.append('<img src="'+ev.imageUrl+'" class="hero-bg">');
hero.append('<div class="detail-overlay"></div>');
var back=$('<button class="btn btn-light btn-pill" style="position:absolute;top:2rem;left:2rem">返回列表</button>'); back.on('click',function(){ navigate(ViewState.HOME); });
var bottom=$('<div class="detail-bottom"></div>');
bottom.append('<div class="container"><span class="badge bg-primary">'+ev.category+'</span><h1 class="text-white fw-bold">'+ev.title+'</h1><div class="d-flex gap-3 text-white-50 fw-medium"><span>'+new Date(ev.date).toLocaleString()+'</span><span>'+ev.location+'</span></div></div>');
hero.append(back); hero.append(bottom); wrap.append(hero);
```

##### 2.3.1.2、CSS样式（不少于100字）
详情页的英雄区延续首页横幅风格，采用覆盖背景与渐变叠层，文字区域使用较高权重的白色与半透明次级色，保证不同素材下的读取效果。返回按钮以浅色胶囊形态呈现并固定于左上角，保持视觉突出但不喧宾夺主。整体样式强调层次与信息优先级，让用户在第一时间获取最重要的上下文。

对应代码（CSS）：

```css
.detail-hero{position:relative;min-height:60vh;overflow:hidden;background:#000}
.detail-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.5),transparent,rgba(0,0,0,.7))}
.detail-bottom{position:absolute;left:0;right:0;bottom:0;padding:2rem 0}
```

##### 2.3.1.3、功能实现（不少于100字）
功能层为返回按钮绑定跳转至首页，保持探索路径可逆；并在渲染前解析 URL 获取 `id`，校验活动存在与否，异常时回退到首页或显示占位提示。该流程既确保了数据正确性，又保证了在未初始化状态下的健壮性，为后续的信息面板与操作面板渲染提供稳定上下文。

对应代码（JS）：

```javascript
function renderDetail(){ var id=new URLSearchParams(window.location.search).get('id'); var ev=events.find(function(e){return String(e.id)===String(id)}); if(!ev){ navigate(ViewState.HOME); return;} /* 英雄区渲染见上 */ }
```

#### 2.3.2、信息面板与图文详情

##### 2.3.2.1、结构（不少于100字）
主体区分为“活动介绍”与“图集预览”两部分。介绍以段落形式呈现丰富文本，并在右侧或下方布局操作面板（报名、收藏、导出等）。图集按两列或三列栅格排列，并限制单图高度，确保在常见屏幕尺寸下有良好的浏览节奏。该结构通过明确分区提升阅读效率，配合操作面板形成从信息读取到参与行为的完整流程。

对应代码（HTML）：

```html
<div class="container my-4">
  <div class="row g-4">
    <div class="col-lg-8"><div id="detail-rich"></div><div id="detail-gallery" class="gallery-grid"></div></div>
    <div class="col-lg-4"><div id="detail-ops"></div></div>
  </div>
</div>
```

##### 2.3.2.2、CSS样式（不少于100字）
信息卡片采用浅色背景与柔和边框，正文段落限制最大宽度与行高，提升长文阅读体验。图集使用统一的裁剪策略与圆角，保证素材来源不同仍能呈现一致的视觉质量。操作面板的按钮保持品牌色与胶囊形态，建立明显的动作识别度与愉悦感。

对应代码（CSS）：

```css
.gallery-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
.gallery-grid img{width:100%;height:220px;object-fit:cover;border-radius:12px}
.card-simple{background:#fff;border:1px solid #eee;border-radius:16px;padding:1rem}
```

##### 2.3.2.3、功能实现（不少于100字）
渲染函数将活动的图文详情写入 `#detail-rich`，并按素材数组生成图集。操作面板追加报名、收藏与导出按钮，并根据用户与活动的关系显示“已报名/已收藏”的状态。该实现使详情页成为信息与行动的统一载体，避免用户在不同页面之间频繁切换。

对应代码（JS）：

```javascript
$('#detail-rich').html('<div class="card-simple">'+ev.description+'</div>');
var g=$('#detail-gallery'); g.empty(); (ev.gallery||[]).forEach(function(src){ g.append('<img src="'+src+'">'); });
```

#### 2.3.3、报名、收藏与ICS导出

##### 2.3.3.1、结构（不少于100字）
操作区包含三个主按钮：报名/取消报名、收藏/取消收藏、导出到日历。按钮彼此间保持统一尺寸与间距，使用图标与文字结合提升可识别性。该布局将参与路径聚合到一处，减少决策与操作成本，并与信息区形成清晰的左右或上下关系，便于用户在阅读后立即采取行动。

对应代码（HTML）：

```html
<div class="d-flex flex-column gap-3">
  <button id="btn-register" class="btn btn-apple btn-pill">立即报名</button>
  <button id="btn-fav" class="btn btn-light btn-pill">加入收藏</button>
  <button id="btn-ics" class="btn btn-outline-dark btn-pill">导出到日历</button>
</div>
```

##### 2.3.3.2、CSS样式（不少于100字）
按钮采用品牌色与浅色风格区分主次，圆角与阴影提升可点击性与愉悦感；轮廓型按钮用于次要功能（如导出），以避免过度强调。整体延续页面的统一视觉系统，保证在不同视图中用户对动作的识别保持一致。

对应代码（CSS）：

```css
.btn-apple{background:#0071e3;color:#fff;border:none}
.btn-pill{border-radius:999px}
```

##### 2.3.3.3、功能实现（不少于100字）
报名逻辑检查当前用户是否存在于活动的 `registeredUsers`，据此切换报名与取消报名状态并保存；收藏使用用户对象中的 `favorites` 列表持久化。导出功能生成符合 iCalendar 规范的 `.ics` 文本，通过 `Blob` 与 `download` 触发浏览器下载。该实现覆盖了参与、偏好与时间管理三种核心场景，增强详情页的可操作性与实用性。

对应代码（JS）：

```javascript
$('#btn-register').off().on('click',function(){ var i=(ev.registeredUsers||[]).indexOf(currentUser?.id); if(i>-1){ ev.registeredUsers.splice(i,1);} else { ev.registeredUsers=(ev.registeredUsers||[]).concat([currentUser.id]); } saveEvents(); renderDetail(); });
$('#btn-fav').off().on('click',function(){ currentUser.favorites=currentUser.favorites||[]; var i=currentUser.favorites.indexOf(ev.id); if(i>-1){ currentUser.favorites.splice(i,1);} else { currentUser.favorites.push(ev.id);} saveUser(); renderDetail(); });
$('#btn-ics').off().on('click',function(){ var ics='BEGIN:VCALENDAR\nVERSION:2.0\nBEGIN:VEVENT\nSUMMARY:'+ev.title+'\nDTSTART:'+new Date(ev.date).toISOString().replace(/[-:]/g,'').split('.')[0]+'Z\nLOCATION:'+ev.location+'\nEND:VEVENT\nEND:VCALENDAR'; var blob=new Blob([ics],{type:'text/calendar'}); var a=document.createElement('a'); a.href=URL.createObjectURL(blob); a.download=ev.title+'.ics'; a.click(); });
```

### 2.4、发布活动实现（publish.html）

#### 2.4.1、结构（不少于100字）
发布页提供结构化表单，引导组织者逐项填写标题、时间、地点、类型、人数限制、主办方与详情介绍。表单分组采用栅格布局，日期时间选择使用原生控件或替代组件，保证易用性与兼容性。按钮区固定于底部或页面末端，确保任何滚动位置都能便捷提交表单。

对应代码（HTML）：

```html
<form id="publish-form" class="container py-4">
  <div class="row g-3">
    <div class="col-md-6"><label class="form-label">活动标题</label><input id="pub-title" class="form-control" /></div>
    <div class="col-md-6"><label class="form-label">主办方</label><input id="pub-org" class="form-control" /></div>
    <div class="col-md-6"><label class="form-label">日期时间</label><input id="pub-date" type="datetime-local" class="form-control" /></div>
    <div class="col-md-6"><label class="form-label">地点</label><input id="pub-loc" class="form-control" /></div>
    <div class="col-md-6"><label class="form-label">类型</label><select id="pub-cat" class="form-select"><option value="academic">学术</option><option value="arts">艺术</option><option value="sports">体育</option><option value="social">社交</option></select></div>
    <div class="col-md-6"><label class="form-label">人数上限</label><input id="pub-max" type="number" class="form-control" /></div>
    <div class="col-12"><label class="form-label">详细介绍</label><textarea id="pub-desc" rows="6" class="form-control"></textarea></div>
  </div>
  <div class="pt-3"><button id="pub-submit" class="btn btn-apple btn-pill">发布活动</button></div>
</form>
```

#### 2.4.2、CSS样式（不少于100字）
发布页表单延续统一的输入样式与间距规范，标题与分组标签加粗以提升可读性。控件采用足够的点击区域与圆角，减少误触与视觉疲劳；提交按钮使用品牌色凸显主行动。整体风格与其他页面一致，保证跨页切换时的视觉连贯与心智稳定。

对应代码（CSS）：

```css
.form-label{font-weight:600}
.form-control,.form-select{border-radius:12px}
```

#### 2.4.3、功能实现（不少于100字）
`renderPublish()` 负责渲染并绑定提交事件。提交时进行必填项校验与类型转换（如人数上限转数值），生成活动对象并追加到 `events`，随后调用 `saveEvents()` 写回持久化，再跳转到详情页或首页。该实现保证了数据的完整与一致，为后续统计与日历等模块提供统一数据源。

对应代码（JS）：

```javascript
$('#pub-submit').off().on('click',function(e){ e.preventDefault(); var ev={ id:Date.now(), title:$('#pub-title').val().trim(), organizer:$('#pub-org').val().trim(), date:new Date($('#pub-date').val()).toISOString(), location:$('#pub-loc').val().trim(), category:$('#pub-cat').val(), maxAttendees:parseInt($('#pub-max').val(),10)||0, attendees:0, description:$('#pub-desc').val().trim(), imageUrl:'assets/img/event-1.jpg' }; if(!ev.title||!ev.date||!ev.location){ alert('请完整填写必填项'); return;} events.push(ev); saveEvents(); navigate(ViewState.DETAIL,{id:ev.id}); });
```

### 2.5、统计分析实现（stats.html）

#### 2.5.1、饼图

##### 2.5.1.1、结构（不少于100字）
统计页将不同图表容器按栅格排列，饼图用于展示各类别活动占比。容器明确高度与宽度，确保 ECharts 在初始化时有稳定的绘图区域；同时标题与说明文字在容器上方或内部展示，便于快速理解数据维度与来源。

对应代码（HTML）：

```html
<div class="container my-4">
  <div class="row g-4">
    <div class="col-md-6"><div id="echarts-pie" style="height:320px"></div></div>
    <div class="col-md-6"><div id="echarts-line" style="height:320px"></div></div>
    <div class="col-md-12"><div id="echarts-bar" style="height:360px"></div></div>
  </div>
</div>
```

##### 2.5.1.2、CSS样式（不少于100字）
图表容器采用固定高度与自适应宽度，保证在不同屏幕下渲染的一致性。整体使用栅格与间距规范，避免图表之间拥挤或过度分散。颜色方案延续品牌与中性色，强调阅读友好与对比度适配，与页面其他元素保持一致的视觉语言。

对应代码（CSS）：

```css
.chart-wrap{background:#fff;border-radius:16px;border:1px solid #eee;padding:1rem}
```

##### 2.5.1.3、功能实现（不少于100字）
`renderStats()` 聚合活动数据，统计不同类别的数量并映射为饼图数据；随后初始化 ECharts 实例并调用 `setOption` 完成渲染。该实现通过轻量聚合逻辑与标准配置达到直观的数据表达，便于后续扩展到趋势折线与主办方对比柱状。

对应代码（JS）：

```javascript
function renderStats(){ var counts=events.reduce(function(acc,ev){ acc[ev.category]=(acc[ev.category]||0)+1; return acc; },{}); var pie=Object.keys(counts).map(function(k){ return {name:k,value:counts[k]}; }); var chart=echarts.init(document.getElementById('echarts-pie')); chart.setOption({ title:{text:'活动分类占比'}, series:[{ type:'pie', radius:'50%', data:pie }] }); /* 折线/柱状同理 */ }
```

### 2.6、活动日历实现（calendar.html）

#### 2.6.1、日历栅格

##### 2.6.1.1、结构（不少于100字）
日历以月视图呈现，由头部月份选择与主体 7×5 栅格组成。每个栅格为一天，包含日期数字与当日活动的简要计数或徽章；下方联动列表展示选中日期的活动详情摘要。该结构将时间维度的浏览与活动数据的读取整合在一个页面中，提升长期规划与快速查询的效率。

对应代码（HTML）：

```html
<div class="container my-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <button id="cal-prev" class="btn btn-light btn-pill">上月</button>
    <h4 id="cal-title" class="fw-bold">2025年 1月</h4>
    <button id="cal-next" class="btn btn-light btn-pill">下月</button>
  </div>
  <div id="calendar-grid" class="calendar-grid"></div>
  <div id="calendar-list" class="mt-3"></div>
</div>
```

##### 2.6.1.2、CSS样式（不少于100字）
栅格使用 `display:grid` 与 7 列定义，格子采用浅色背景与圆角，悬停态加深阴影提示交互性；日期数字置于左上角，活动徽章或计数以右下角徽标呈现，避免遮挡。整体视觉遵循页面的中性灰与柔和阴影风格，形成统一的产品体验。

对应代码（CSS）：

```css
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem}
.cal-cell{background:#fff;border:1px solid #eee;border-radius:12px;min-height:88px;padding:.5rem;position:relative;cursor:pointer}
.cal-date{font-weight:700;color:#6b7280}
.cal-badge{position:absolute;right:.5rem;bottom:.5rem;background:#0071e3;color:#fff;border-radius:8px;font-size:.75rem;padding:.1rem .4rem}
```

##### 2.6.1.3、功能实现（不少于100字）
`renderCalendar()` 生成当前月份的日期栅格，并统计每一天的活动数量，以徽章呈现。点击日期后在下方列表渲染当日活动摘要卡片，支持点击跳转到详情页。左右按钮切换月份并重新渲染。该实现为用户提供面向时间的总体视图，同时保留深入查看的快速路径。

对应代码（JS）：

```javascript
function renderCalendar(){ var now=new Date(); var year=now.getFullYear(), month=now.getMonth(); var first=new Date(year,month,1), last=new Date(year,month+1,0); var grid=$('#calendar-grid'); grid.empty(); for(var d=1; d<=last.getDate(); d++){ var cell=$('<div class="cal-cell"></div>'); cell.append('<div class="cal-date">'+d+'</div>'); var dayStr=new Date(year,month,d).toDateString(); var list=events.filter(function(ev){ return new Date(ev.date).toDateString()===dayStr; }); if(list.length){ cell.append('<div class="cal-badge">'+list.length+' 场</div>'); } (function(list){ cell.on('click',function(){ var box=$('#calendar-list'); box.empty(); list.forEach(function(ev){ box.append('<div class="card-simple mb-2"><div class="fw-semibold">'+ev.title+'</div><div class="small text-secondary">'+ev.location+'</div></div>'); }); }); })(list); grid.append(cell); } }
```

### 2.7、意见反馈实现（feedback.html）

#### 2.7.1、结构（不少于100字）
反馈页采用卡片化表单，包含分段式类型选择、标题、详细描述与联系方式输入。类型选择以 2×2 栅格呈现，首次加载默认选中“功能建议”；下方以宽幅主按钮承载提交行为，并在按钮下方展示处理提示文本。结构上强调轻盈且友好，降低表达门槛，鼓励用户主动反馈。

对应代码（HTML）：

```html
<form id="feedback-form" class="container py-4">
  <div class="row g-2" id="fb-types"></div>
  <label class="form-label fw-semibold">标题</label>
  <input id="fb-title" class="input-soft mb-3" placeholder="简要描述您的问题" />
  <label class="form-label fw-semibold">详细描述</label>
  <textarea id="fb-desc" rows="6" class="textarea-soft mb-3" placeholder="请详细描述您遇到的情况或建议..."></textarea>
  <label class="form-label fw-semibold">联系方式 <span class="text-secondary">(选填)</span></label>
  <input id="fb-contact" class="input-soft mb-4" placeholder="邮箱或电话，方便我们联系您" />
  <button id="fb-submit" class="w-100 py-3 btn btn-apple btn-pill shadow-soft">提交反馈</button>
  <div class="text-center text-secondary small mt-2">我们通常会在 24 小时内阅读并处理您的反馈。</div>
</form>
```

#### 2.7.2、CSS样式（不少于100字）
分段选择器使用浅灰与深色反转呈现选中态，输入与文本域采用“软糖”风格，圆角与柔和阴影提高亲和力。主按钮使用品牌蓝色作为显著主行动色，统一视觉识别。整体风格强调轻量、温和与清晰，避免强烈对比造成的视觉负担，适合长文本输入与阅读。

对应代码（CSS）：

```css
.seg-item{position:relative;display:block}
.seg-input{position:absolute;opacity:0;pointer-events:none}
.seg-card{padding:.75rem 1rem;border:1px solid #e5e7eb;border-radius:12px;background:#f9fafb;text-align:center;font-size:.9rem;font-weight:600;color:#6b7280;transition:all .15s}
.seg-item .seg-input:checked + .seg-card{background:#000;color:#fff;border-color:#000}
.input-soft,.textarea-soft{width:100%;padding:1rem;border-radius:12px;background:#f5f5f7;border:1px solid transparent;transition:all .15s;color:#111}
.btn-apple{background:#0071e3;color:#fff;border:none}
```

#### 2.7.3、功能实现（不少于100字）
`renderFeedback()` 构建类型选择的栅格并设置默认选中项，随后渲染标题、详细描述与联系方式输入。提交事件将反馈对象写入本地（可使用 `campushub_feedbacks` 键）或作前端模拟，后续可对接服务端接口。该实现强调路径清晰与输入舒适，鼓励用户完成反馈闭环。

对应代码（JS）：

```javascript
function renderFeedback(){ var types=['功能建议','Bug 报告','活动投诉','其他']; var row=$('#fb-types'); row.empty(); types.forEach(function(t,i){ var col=$('<div class="col-6 col-md-3"></div>'); var label=$('<label class="seg-item w-100"></label>'); var input=$('<input type="radio" name="fb-type" class="seg-input" value="'+t+'">'); if(i===0){ input.attr('checked',true);} var seg=$('<div class="seg-card">'+t+'</div>'); label.append(input).append(seg); col.append(label); row.append(col); }); $('#fb-submit').off().on('click',function(e){ e.preventDefault(); var fb={ type:$('input[name="fb-type"]:checked').val(), title:$('#fb-title').val().trim(), desc:$('#fb-desc').val().trim(), contact:$('#fb-contact').val().trim(), ts:Date.now() }; var all=JSON.parse(localStorage.getItem('campushub_feedbacks')||'[]'); all.push(fb); localStorage.setItem('campushub_feedbacks', JSON.stringify(all)); alert('感谢反馈！'); }); }
```

### 2.8、个人中心实现（profile.html）

#### 2.8.1、头部与基本信息

##### 2.8.1.1、结构（不少于100字）
个人中心顶部展示封面与头像，右侧或下方显示昵称、学号与编辑入口。下方使用标签页（Tabs）分区“我的活动”“我的收藏”“我的动态”，形成清晰的信息架构。该结构聚合与用户有关的所有数据视图，并在交互上提供快速切换，降低查找成本。

对应代码（HTML）：

```html
<div class="profile-header container py-4">
  <div class="d-flex align-items-center gap-3">
    <img class="rounded-circle" src="assets/img/avatar.jpg" width="72" height="72" />
    <div><div id="pf-name" class="fw-bold"></div><div id="pf-id" class="text-secondary small"></div></div>
  </div>
  <ul class="nav nav-pills mt-3" id="pf-tabs">
    <li class="nav-item"><button class="nav-link active" data-tab="registered">我的活动</button></li>
    <li class="nav-item"><button class="nav-link" data-tab="favorites">我的收藏</button></li>
    <li class="nav-item"><button class="nav-link" data-tab="updates">我的动态</button></li>
  </ul>
</div>
```

##### 2.8.1.2、CSS样式（不少于100字）
头像采用圆形裁剪并与封面形成层次；标签页使用胶囊按钮风格以表达选中态与非选中态差异。整体采用统一的间距与字号，强调数据与导航的清晰关系，避免过度装饰。

对应代码（CSS）：

```css
.profile-header .nav-link{border-radius:999px}
```

##### 2.8.1.3、功能实现（不少于100字）
渲染函数从 `currentUser` 读取基本信息并填充头像与文本；为标签按钮绑定切换事件，点击后按数据源（报名列表、收藏列表）生成列表视图。该实现将与用户相关的关键数据聚合到一个中心页面，并提供便捷的管理能力。

对应代码（JS）：

```javascript
function renderProfile(){ $('#pf-name').text(currentUser?.name||'未登录'); $('#pf-id').text(currentUser?.id||''); $('#pf-tabs .nav-link').off().on('click',function(){ $('#pf-tabs .nav-link').removeClass('active'); $(this).addClass('active'); var tab=$(this).data('tab'); var list=$('#pf-list'); list.empty(); if(tab==='registered'){ (events||[]).filter(function(ev){ return (ev.registeredUsers||[]).includes(currentUser?.id); }).forEach(function(ev){ list.append('<div class="card-simple mb-2">'+ev.title+'</div>'); }); } else if(tab==='favorites'){ (events||[]).filter(function(ev){ return (currentUser?.favorites||[]).includes(ev.id); }).forEach(function(ev){ list.append('<div class="card-simple mb-2">'+ev.title+'</div>'); }); } else { list.append('<div class="text-secondary small">暂无动态</div>'); } }); }
```


### 2.3 活动详情（detail.html）

结构是如何实现的：

分点1：详情页顶部视觉区通过 `detail-hero` 与渐变叠层构建，背景图覆盖全宽高，并在左上角悬浮一个“返回列表”按钮。底部 `detail-bottom` 承载类别徽章、主标题与时间地点信息，使核心信息在第一屏即被准确传达。

代码位置：结构容器 `detail.html:55–57`，渲染 `assets/app.js:546–569`

```javascript
var wrap=$('#detail-container'); wrap.empty();
var hero=$('<div class="detail-hero"></div>');
hero.append('<img src="'+ev.imageUrl+'" class="hero-bg">');
hero.append('<div class="detail-overlay"></div>');
var back=$('<button class="btn btn-light btn-pill" style="position:absolute;top:2rem;left:2rem">返回列表</button>');
back.on('click',function(){ navigate(ViewState.HOME); });
var bottom=$('<div class="detail-bottom"></div>');
bottom.append('<div class="container"><span class="badge bg-primary">'+ev.category+'</span><h1 class="text-white fw-bold">'+ev.title+'</h1><div class="d-flex gap-3 text-white-50 fw-medium"><span>'+new Date(ev.date).toLocaleString()+'</span><span>'+ev.location+'</span></div></div>');
hero.append(back); hero.append(bottom); wrap.append(hero);
```

分点2：主体内容区分为“活动介绍”与“图集预览”两部分。介绍以可读性优先的段落形式呈现，图集则按两列排列并限定高度，确保在常见屏幕上获得良好的浏览节奏，避免内容密度变化导致的跳跃。

代码位置：`assets/app.js:570–587`

```javascript
var main=$('<div class="container py-4"></div>');
var row=$('<div class="row g-4"></div>');
var colMain=$('<div class="col-lg-8"></div>');
var intro=$('<div></div>'); intro.append('<h4 class="fw-bold mb-3">活动介绍</h4>'); intro.append('<p class="text-secondary">'+ev.description+'</p>');
var gallery=$('<div class="row g-3 mt-2"></div>');
gallery.append('<div class="col-6"><img src="assets/img/gallery-1-'+ev.id+'.jpg" class="rounded-2xl" style="width:100%;height:12rem;object-fit:cover"></div>');
gallery.append('<div class="col-6"><img src="assets/img/gallery-2-'+ev.id+'.jpg" class="rounded-2xl" style="width:100%;height:12rem;object-fit:cover"></div>');
intro.append(gallery); colMain.append(intro);
```

分点3：讨论区与评论表单在登录状态下动态启用。若有评论则以头像+气泡的列表样式逐条呈现；未登录则提示登录以参与互动。表单提交后将新评论写入当前活动并刷新视图，形成闭环的阅读与发表体验。

代码位置：`assets/app.js:588–649`

```javascript
var comments=$('<div class="mt-4"></div>'); comments.append('<h4 class="fw-bold mb-3">讨论区</h4>');
if(ev.comments.length===0){ comments.append('<div class="text-center py-4 bg-light rounded-2xl">暂无评论，快来抢沙发！</div>'); }
else{ /* 遍历并渲染评论列表 */ }
var form=$('<div class="mt-3"></div>');
if(currentUser){ var ta=$('<textarea class="form-control rounded-3" rows="3" placeholder="发表你的看法..."></textarea>'); var btn=$('<button class="btn btn-dark btn-pill mt-2">发送</button>'); btn.on('click',function(){ /* 追加评论与保存 */ }); form.append(ta).append(btn); }
else{ form.append('<div class="alert alert-primary">请登录后参与评论</div>'); }
comments.append(form); colMain.append(comments);
```

分点4：右侧信息卡片采用 `position:sticky` 固定在视窗顶部下方，包含“距离开始倒计时”、“主办方与热度”、“报名进度条”，以及报名、收藏、分享与 ICS 导出动作区域，确保在阅读过程中可随时触达关键操作。

代码位置：`assets/app.js:650–667,668–836`

```javascript
var colSide=$('<div class="col-lg-4"></div>');
var card=$('<div class="p-4 rounded-4 shadow-soft border" style="position:sticky;top:2rem"></div>');
/* 倒计时与主办方、热度、进度条 */
var regBtn=$('<button class="btn btn-pill w-100 mb-2">...</button>');
var favBtn=$('<button class="btn btn-outline-danger btn-pill w-50 me-2">收藏</button>');
var shareBtn=$('<button class="btn btn-outline-secondary btn-pill w-50">分享</button>');
var icsBtn=$('<button class="btn btn-link w-100">添加到日历 (ICS)</button>');
card.append(regBtn); card.append($('<div class="d-flex"></div>').append(favBtn).append(shareBtn)); card.append(icsBtn);
colSide.append(card); row.append(colMain).append(colSide); main.append(row); wrap.append(main);
```

样式是如何实现的：

分点1：`detail-hero` 控制视觉区高度与溢出，`detail-overlay` 自底向上渐变提升文字对比度，`detail-bottom` 以绝对定位增强信息与背景的空间分离，保证在不同海报素材下的可读性与一致性。

代码位置：`assets/styles.css:274–296`

```css
.detail-hero{position:relative;height:50vh;overflow:hidden;background:#000}
.detail-overlay{position:absolute;inset:0;background:linear-gradient(to top,rgba(0,0,0,.8),transparent,rgba(0,0,0,.3))}
.detail-bottom{position:absolute;bottom:0;left:0;right:0;padding:1.5rem}
```

分点2：按钮与进度样式沿用统一的胶囊与品牌配色。`btn-pill` 统一圆角半径，`progress-wrap` 与 `progress-bar-apple` 组合呈现报名比例，配合柔和阴影 `shadow-soft` 与半透明玻璃背景 `glass` 增强视觉层次。

代码位置：`assets/styles.css:297–313,331–333,298–300`

```css
.glass{background:rgba(255,255,255,.08);backdrop-filter:blur(8px)}
.btn-pill{border-radius:999px}
.progress-wrap{height:12px;background:#eee;border-radius:999px;overflow:hidden}
.progress-bar-apple{background:#0071e3;height:100%}
.shadow-soft{box-shadow:0 8px 30px rgba(0,0,0,.08)}
```

分点3：分享弹层与入场动画样式使用半透明遮罩与轻动效。`modal-dark` 提升对话框聚焦，`animate-fade-in` 与 `@keyframes fadeIn` 提供从下至上的渐现过渡，使交互反馈更自然而不突兀。

代码位置：`assets/styles.css:314–330`

```css
.modal-dark{background:rgba(0,0,0,.6);backdrop-filter:blur(4px)}
.animate-fade-in{animation:fadeIn .5s ease-out forwards}
@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}100%{opacity:1;transform:translateY(0)}}
```

功能是如何实现的：

分点1：URL 参数解析在无预选事件时执行，从查询字符串中取 `id` 并匹配到活动数组，找不到则回退首页。该逻辑保证详情页可从不同入口进入且状态一致，避免因刷新导致的数据丢失。

代码位置：`assets/app.js:531–545`

```javascript
if(!selectedEvent){ var q=window.location.search; var m=/[?&]id=([^&]+)/.exec(q); if(m&&m[1]){ var id=decodeURIComponent(m[1]); selectedEvent=events.find(function(e){ return e.id===id; }); } }
if(!selectedEvent){ navigate(ViewState.HOME); return; }
```

分点2：报名切换依据当前用户是否存在于 `registeredUsers` 数组，点击后在本地事件列表中增删用户并同步人数，再调用 `saveEvents()` 持久化并重新渲染，形成可逆的即时交互反馈。

代码位置：`assets/app.js:688–723`

```javascript
regBtn.on('click',function(){ if(!currentUser){ alert('请先登录'); return; } events=events.map(function(e){ if(e.id===ev.id){ var idx=e.registeredUsers.indexOf(currentUser.id); if(idx>-1){ e.registeredUsers=e.registeredUsers.filter(function(i){ return i!==currentUser.id; }); e.attendees=Math.max(0,e.attendees-1); } else { e.registeredUsers=e.registeredUsers.concat([currentUser.id]); e.attendees=e.attendees+1; } } return e; }); selectedEvent=events.find(function(e){ return e.id===ev.id; }); saveEvents(); renderDetail(); });
```

分点3：收藏切换与报名逻辑一致，但仅维护 `favoritedUsers` 集合，不改变参与人数。状态变化后同样持久化与刷新界面，保证收藏标识与动作按钮文案同步更新。

代码位置：`assets/app.js:724–755`

```javascript
favBtn.on('click',function(){ if(!currentUser){ alert('请先登录'); return; } events=events.map(function(e){ if(e.id===ev.id){ var idx=e.favoritedUsers.indexOf(currentUser.id); if(idx>-1){ e.favoritedUsers=e.favoritedUsers.filter(function(i){ return i!==currentUser.id; }); } else { e.favoritedUsers=e.favoritedUsers.concat([currentUser.id]); } } return e; }); selectedEvent=events.find(function(e){ return e.id===ev.id; }); saveEvents(); renderDetail(); });
```

分点4：分享逻辑优先调用 `navigator.share`，在不支持环境下退化为自建弹层，内含链接复制与扫码提示。采用最小依赖与渐进增强策略，保证不同浏览器上的一致可用性。

代码位置：`assets/app.js:756–796`

```javascript
shareBtn.on('click',function(){ var url=window.location.href; if(navigator.share){ navigator.share({ title:ev.title, text:ev.description, url:url }).catch(function(){}); } else { /* 构建模态层与复制按钮 */ } });
```

分点5：ICS 导出严格遵循 iCalendar 规范，时间戳格式统一去除分隔与毫秒并补齐 `Z`。通过 `Blob` 生成文件并使用隐式锚点触发下载，整个流程在前端完全完成，便于离线查看与跨平台导入。

代码位置：`assets/app.js:797–836`

```javascript
var ics='BEGIN:VCALENDAR\nVERSION:2.0\nPRODID:-//CampusHub//Event//CN\nBEGIN:VEVENT\nUID:'+ev.id+'@campushub.com\nDTSTAMP:'+fmt(new Date())+'\nDTSTART:'+fmt(start)+'\nDTEND:'+fmt(end)+'\nSUMMARY:'+ev.title+'\nDESCRIPTION:'+ev.description+'\nLOCATION:'+ev.location+'\nEND:VEVENT\nEND:VCALENDAR';
var blob=new Blob([ics],{ type:'text/calendar;charset=utf-8' }); var url=URL.createObjectURL(blob); var a=document.createElement('a'); a.href=url; a.download=ev.title+'.ics'; document.body.appendChild(a); a.click(); document.body.removeChild(a);
```

### 2.4 发布活动（publish.html）

结构是如何实现的：

分点1：页面采用左右分栏布局，左侧为半屏视觉区展示主题图与引导语，右侧为表单区域容器。视觉区包含顶部返回按钮与底部深色渐变，增强层次感与可读性，同时在大屏上提供仪式感的发布体验。

代码位置：`publish.html:57–70`

```html
<div class="d-flex">
  <div class="d-none d-lg-block visual-left">
    <img src="assets/img/publish-bg.jpg" class="visual-img" alt="" />
    <div class="visual-overlay"></div>
    <div class="visual-top container py-3"><button class="apple-back" id="publish-back">← 返回首页</button></div>
    <div class="visual-content container"><h2 class="text-light fw-bold display-6 mb-3">让创意落地，<br/>只需简单几步。</h2></div>
  </div>
  <div class="flex-grow-1"><div class="container py-4 py-md-5" id="publish-form-wrap"></div></div>
</div>
```

分点2：表单由标题、时间、地点、类型、人数、详情与主办方等字段组成，按两行网格分布，既保证信息完整性，又减少纵向滚动。底部行为区提供“取消/立即发布”，将主要动作置于固定分割线之后，符合表单提交的视觉预期。

代码位置：`assets/app.js:842–883`

```javascript
var form=$('<form class="mt-3"></form>');
form.append('<label class="form-label fw-bold">活动标题</label><input required type="text" name="title" class="form-control form-control-lg rounded-3 mb-3" placeholder="例如：2025 秋季校园黑客松">');
var grid=$('<div class="row g-3"></div>');
grid.append('<div class="col-md-6"><label class="form-label fw-bold">时间</label><input required type="datetime-local" name="date" class="form-control rounded-3"></div>');
grid.append('<div class="col-md-6"><label class="form-label fw-bold">地点</label><input required type="text" name="location" class="form-control rounded-3" placeholder="例如：科技楼 A101"></div>');
var grid2=$('<div class="row g-3 mt-1"></div>');
grid2.append('<div class="col-md-6"><label class="form-label fw-bold">活动类型</label><select name="category" class="form-select rounded-3"><option value="academic">学术讲座</option><option value="sports">体育赛事</option><option value="arts">文艺演出</option><option value="social">社交聚会</option></select></div>');
grid2.append('<div class="col-md-6"><label class="form-label fw-bold">最大人数</label><input required type="number" name="maxAttendees" class="form-control rounded-3" value="50"></div>');
var descWrap=$('<div class="mt-2"></div>'); descWrap.append('<label class="form-label fw-bold mb-0">活动详情</label>'); descWrap.append('<textarea required name="description" rows="8" class="form-control rounded-3" placeholder="请描述活动的具体流程、嘉宾介绍及参与须知..."></textarea>');
var org=$('<div class="mt-2"></div>'); org.append('<label class="form-label fw-bold">主办方</label><input required type="text" name="organizer" class="form-control rounded-3" placeholder="例如：校学生会">');
var actions=$('<div class="pt-3 border-top d-flex gap-2"></div>');
actions.append('<button type="button" class="btn btn-light rounded-pill">取消</button>').append('<button type="submit" class="btn btn-primary rounded-pill flex-grow-1">立即发布</button>');
form.append(grid).append(grid2).append(descWrap).append(org).append(actions);
```

分点3：返回按钮与占位修正作为细节完善。点击返回回到首页，输入框占位文本根据年份自动修正，避免历史拷贝造成的语义不一致，体现对微交互与文案一致性的关注。

代码位置：返回 `assets/app.js:884–888`，占位修正 `assets/app.js:1575–1579`

```javascript
$('#publish-back').off().on('click',function(){ setView(ViewState.HOME); });
var input=$('#publish-form-wrap input[name=title]'); if(input.length){ input.attr('placeholder','例如：2025 秋季校园黑客松'); }
```

样式是如何实现的：

分点1：半屏视觉区以 `visual-left` 控制宽度与高度，背景图 `visual-img` 使用半透明提高文字对比，叠层 `visual-overlay` 提供从浅至深的渐变，结合顶部 `visual-top` 与居中 `visual-content` 构成稳定的信息布局。

代码位置：`assets/styles.css:155–186,169–178,179–194`

```css
.visual-left{position:relative;width:42%;background:#000;min-height:100vh}
.visual-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.5}
.visual-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.4),transparent,rgba(0,0,0,.9))}
.visual-top{position:absolute;top:0;left:0;right:0;z-index:2}
.visual-content{position:relative;z-index:2;min-height:100vh;display:flex;align-items:center;justify-content:center}
```

分点2：返回按钮采用玻璃拟态与胶囊形态，悬停与按下均有细微位移与背景变化反馈。该控件在多个页面复用，构成一致的返回行为与视觉语言，降低跨模块学习成本。

代码位置：`assets/styles.css:365–381`

```css
.apple-back{display:inline-flex;align-items:center;gap:.5rem;color:#fff;background:rgba(255,255,255,.12);backdrop-filter:blur(8px);border:none;padding:.5rem .9rem;border-radius:999px;font-weight:700;box-shadow:0 8px 30px rgba(0,0,0,.08);transition:transform .15s ease,background .15s ease}
.apple-back:hover{background:rgba(255,255,255,.18);transform:translateY(-1px)}
.apple-back:active{transform:translateY(0)}
```

功能是如何实现的：

分点1：`renderPublish()` 以声明式方式构建表单 DOM，统一在容器中追加并绑定。字段值在提交时集中采集生成活动对象，随后插入事件数组头部，保证新活动优先展示以提升反馈感知。

代码位置：`assets/app.js:842–919`

```javascript
form.on('submit',function(e){ e.preventDefault(); var fd={ /* 采集字段 */ }; var newEvent={ id:Date.now()+'', title:fd.title, description:fd.description, date:fd.date, location:fd.location, category:fd.category, imageUrl:'assets/img/event-'+(Math.floor(Math.random()*12)+1)+'.jpg', organizer:fd.organizer, attendees:0, maxAttendees:fd.maxAttendees, comments:[], registeredUsers:[], favoritedUsers:[] }; events=[newEvent].concat(events); setView(ViewState.HOME); });
```

### 2.5 统计分析（stats.html）

结构是如何实现的：

分点1：页面顶部为标题与说明，然后以指标卡片概览全局指标；下方四象限布局承载饼图、折线图、柱状图与雷达图，采用响应式栅格保证在不同屏幕宽度下的排列与换行一致。

代码位置：`stats.html:56–61,62–185`

```html
<div class="row g-4" id="metric-cards"></div>
<div class="row g-4 mt-2">
  <div class="col-lg-6"><div class="card shadow-sm rounded-4"><div class="card-body"><div class="d-flex justify-content之间 align-items-center mb-2"><h5 class="fw-bold">活动类型分布 (ECharts)</h5></div><div id="echarts-pie" style="height:320px"></div></div></div></div>
  <div class="col-lg-6"><div class="card shadow-sm rounded-4"><div class="card-body"><h5 class="fw-bold mb-2">月度参与趋势</h5><div id="echarts-line" style="height:320px"></div></div></div></div>
  <div class="col-lg-6"><div class="card shadow-sm rounded-4"><div class="card-body"><h5 class="fw-bold mb-2">热门活动 Top 5</h5><div id="echarts-bar" style="height:320px"></div></div></div></div>
  <div class="col-lg-6"><div class="card shadow-sm rounded-4"><div class="card-body"><h5 class="fw-bold mb-2">校园活力维度</h5><div id="echarts-radar" style="height:320px"></div></div></div></div>
</div>
```

分点2：指标卡片由四类关键值组成，分别反映活动总量、参与总数、热门类型与本月新增。卡片采用白底圆角与轻阴影风格，数值与标题的层级对比明显，提升浏览与比较效率。

代码位置：`assets/app.js:920–962`

```javascript
var container=$('#metric-cards'); container.empty();
var totalAtt=events.reduce(function(a,c){ return a+c.attendees; },0);
var cards=[{ title:'活动总量', value:events.length, accent:'primary' },{ title:'总参与', value:totalAtt, accent:'success' },{ title:'热门类型', value:mostCat(), accent:'purple' },{ title:'本月新增', value:'+8', accent:'warning' }];
cards.forEach(function(c){ var col=$('<div class="col-12 col-md-6 col-lg-3"></div>'); var card=$('<div class="bg-white p-4 rounded-4 shadow-sm h-100"></div>'); card.append('<div class="text-secondary text-uppercase fw-bold" style="font-size:12px">'+c.title+'</div>'); card.append('<div class="fs-3 fw-bold">'+c.value+'</div>'); col.append(card); container.append(col); });
```

分点3：四类图表的数据源均由前端聚合生成。饼图展示类型占比，折线图反映月度趋势，柱状图列出热门活动 Top 5，雷达图用于维度综合评分；全部使用 ECharts 初始化并设置颜色、平滑与图例样式。

代码位置：`assets/app.js:963–1009,1010–1041,1042–1064`

```javascript
var pie=echarts.init(document.getElementById('echarts-pie')); pie.setOption({ series:[{ type:'pie', radius:['40%','70%'], label:{ show:false }, labelLine:{ show:false }, data:pieData, color:['#0071e3','#34c759','#ff9500','#af52de'] }] });
var line=echarts.init(document.getElementById('echarts-line')); line.setOption({ xAxis:{ type:'category', data:['9月','10月','11月','12月','1月'] }, yAxis:{ type:'value' }, series:[{ type:'line', data:[120,280,450,520,180], smooth:true, lineStyle:{ width:3, color:'#0071e3' }, itemStyle:{ color:'#0071e3' } }] });
var bar=echarts.init(document.getElementById('echarts-bar')); bar.setOption({ xAxis:{ type:'category', data:barData.map(function(d){ return d.name; }) }, yAxis:{ type:'value' }, series:[{ type:'bar', data:barData.map(function(d){ return d.value; }), itemStyle:{ color:'#34c759' } }] });
var radar=echarts.init(document.getElementById('echarts-radar')); radar.setOption({ radar:{ indicator:[{ name:'学术',max:150 },{ name:'艺术',max:150 },{ name:'体育',max:150 },{ name:'社交',max:150 },{ name:'公益',max:150 },{ name:'创新',max:150 }] }, series:[{ type:'radar', data:[{ value:[120,98,86,99,85,65], name:'活力指数' }], itemStyle:{ color:'#ff9500' }, lineStyle:{ color:'#ff9500' }, areaStyle:{ color:'rgba(255,149,0,.3)' } }] });
```

样式是如何实现的：

分点1：图表容器置于卡片内，卡片采用 `rounded-4` 与 `shadow-sm`，在浅灰背景上形成清晰的视觉分组，便于在同一视图内进行横向与纵向的比较阅读。

代码位置：示例参见 `stats.html:62–185` 与 `assets/styles.css:331–333`

```css
.shadow-soft{box-shadow:0 8px 30px rgba(0,0,0,.08)}
```

分点2：指标卡片与图表区通过统一的间距体系 `g-4` 与 `mt-2` 保持模块间的秩序感，使信息密度与呼吸空间达到平衡，提升整体版面可读性与节奏。

功能是如何实现的：

分点1：窗口大小变化时监听 `resize` 并调用各图表的 `resize()`，确保在设备旋转或窗口拖拽时图表自适配，不出现溢出或压缩失真的情况。

代码位置：`assets/app.js:1065–1071`

```javascript
window.addEventListener('resize',function(){ pie.resize(); line.resize(); bar.resize(); radar.resize(); });
```

### 2.6 活动日历（calendar.html）

结构是如何实现的：

分点1：日历头部包含标题说明与左右切换按钮，中间的月份标题随当前上下文更新。按钮置于圆角胶囊容器中，与整体风格一致，同时承载交互语义，形成明晰的时序导航。

代码位置：`assets/app.js:1493–1506`

```javascript
var header=$('<div class="d-flex justify-content之间 align-items-center mb-3"></div>');
var nav=$('<div class="d-flex align-items-center gap-2 bg-white rounded-pill px-3 py-2 border"></div>');
var prev=$('<button class="btn btn-light btn-pill">‹</button>');
var title=$('<div class="fw-bold">'+y+'年 '+(m+1)+'月</div>');
var next=$('<button class="btn btn-light btn-pill">›</button>');
nav.append(prev).append(title).append(next); header.append(nav); wrap.append(header);
```

分点2：星期标题行与日历主体均使用 `calendar-grid` 以 7 列网格呈现。主体在首行填充空格以对齐首日位置，然后为每个日期渲染单元格与事件列表，确保结构语义与视觉对齐准确。

代码位置：`assets.app.js:1516–1524,1525–1531`

```javascript
var daysHeader=$('<div class="calendar-grid border-bottom bg-light"></div>');
['日','一','二','三','四','五','六'].forEach(function(d){ daysHeader.append('<div class="py-2 text-center text-secondary fw-bold">'+d+'</div>'); });
var body=$('<div class="calendar-grid" style="height:70vh"></div>');
var firstDay=new Date(y,m,1).getDay(); for(var i=0;i<firstDay;i++){ body.append('<div class="calendar-cell bg-light"></div>'); }
```

分点3：日期单元格渲染时高亮今日，并在下方渲染当日所有事件，点击事件项直接联动到详情页。通过阻止事件冒泡避免触发父级单元的其他点击行为，保证交互的明确与可控。

代码位置：`assets/app.js:1531–1574`

```javascript
for(var d=1; d<=daysInMonth; d++){
  var cell=$('<div class="calendar-cell"></div>');
  var today=new Date(); var isToday=d===today.getDate()&&m===today.getMonth()&&y===today.getFullYear();
  cell.append('<div class="d-flex justify-content之间"><div class="calendar-day '+(isToday?'bg-primary text-white':'')+'">'+d+'</div></div>');
  var list=$('<div></div>');
  var dayEvents=events.filter(function(e){ var de=new Date(e.date); return de.getDate()===d&&de.getMonth()===m&&de.getFullYear()===y; });
  dayEvents.forEach(function(ev){ var item=$('<div class="calendar-event"></div>'); item.append('<div class="fw-bold" style="font-size:12px">'+ev.title+'</div>'); item.append('<div class="text-secondary" style="font-size:10px">'+new Date(ev.date).getHours()+':00</div>'); item.on('click',function(e){ e.stopPropagation(); selectedEvent=ev; setView(ViewState.DETAIL); }); list.append(item); });
  cell.append(list); body.append(cell);
}
```

样式是如何实现的：

分点1：网格与单元格的边界与内边距统一定义，保证日历在大多数屏幕下的清晰划分。日期圆点采用粗体与居中显示，事件条目为小号文字、细边框与轻圆角，方便密集列表的阅读。

代码位置：`assets/styles.css:337–364`

```css
.calendar-grid{display:grid;grid-template-columns:repeat(7,1fr)}
.calendar-cell{border-right:1px solid #eee;border-bottom:1px solid #eee;padding:.5rem;min-height:100px}
.calendar-day{width:32px;height:32px;border-radius:999px;display:flex;align-items:center;justify-content:center;font-weight:700}
.calendar-event{border:1px solid #eee;background:#fff;border-radius:12px;padding:.25rem .4rem;font-size:.75rem;margin:.25rem 0;cursor:pointer}
```

功能是如何实现的：

分点1：月份切换通过维护 `__calDate` 并在点击前后更新，再递归调用 `renderCalendar()` 完成重绘。该方式无需复杂状态管理即可实现时间轴的顺滑导航与视图刷新。

代码位置：`assets/app.js:1507–1514`

```javascript
prev.on('click',function(){ window.__calDate=new Date(y,m-1,1); renderCalendar(); });
next.on('click',function(){ window.__calDate=new Date(y,m+1,1); renderCalendar(); });
```

### 2.7 登录（login.html）

结构是如何实现的：

分点1：页面采用左右布局，左侧为半屏视觉，右侧为垂直居中的表单容器。视觉区提供品牌叙事与引导文案，表单区则保证在多数设备上均能无滚动完成输入与提交，提升完成率与舒适度。

代码位置：`login.html:56–67`

```html
<div class="d-flex min-vh-100">
  <div class="d-none d-lg-block half-visual">
    <img src="assets/img/login-bg.jpg" class="visual-img" alt="" />
    <div class="visual-gradient"></div>
    <div class="visual-caption container"><h2 class="display-5 text-light fw-bold mb-3">探索无限可能。</h2><p class="lead text-light-50">CampusHub 是连接你与校园精彩活动的桥梁。立即登录，开启你的专属旅程。</p></div>
  </div>
  <div class="flex-grow-1 d-flex align-items-center"><div class="container" id="login-form-wrap"></div></div>
</div>
```

样式是如何实现的：

分点1：半屏视觉区使用 `half-visual` 控制宽度，底部 `visual-gradient` 形成自下而上的黑色渐层，`visual-caption` 将内容垂直居中，配合浅色文本与半透明说明，获得兼顾情感与可读性的效果。

代码位置：`assets/styles.css:208–228`

```css
.half-visual{position:relative;width:50%;background:#111;min-height:100vh}
.visual-gradient{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(0,0,0,.9),transparent);height:50%}
.visual-caption{position:absolute;top:50%;left:0;right:0;transform:translateY(-50%)}
```

功能是如何实现的：

分点1：`renderLogin()` 构建登录表单并绑定提交，将模拟用户信息写入内存，随后跳转首页并刷新导航区认证态。该逻辑示范了在无后端条件下的前端认证流程与页面联动。

代码位置：`assets/app.js:1072–1110`

```javascript
form.on('submit',function(e){ e.preventDefault(); currentUser={ id:'user_123', name:'梁升富', email:'LiangShengFu_2023152006@university.edu', avatar:'assets/img/avatar.jpg', role:'student' }; setView(ViewState.HOME); renderAuth(); });
```

### 2.8 注册（register.html）

结构是如何实现的：

分点1：注册页结构与登录页保持对称，沿用半屏视觉+居中表单的布局。表单包含姓名、学号、校园邮箱与密码四项核心字段，并通过网格保持两列排布，便于快速填写与校对。

代码位置：`register.html:56–67`

```html
<div class="d-flex min-vh-100">
  <div class="d-none d-lg-block half-visual">
    <img src="assets/img/register-bg.jpg" class="visual-img" alt="" />
    <div class="visual-gradient"></div>
    <div class="visual-caption container"><h2 class="display-5 text-light fw-bold mb-3">加入社区。</h2><p class="lead text-light-50">创建您的 CampusHub 账户，立即开始组织、参与和分享精彩的校园活动。</p></div>
  </div>
  <div class="flex-grow-1 d-flex align-items-center"><div class="container" id="register-form-wrap"></div></div>
</div>
```

样式是如何实现的：

分点1：复用登录页视觉样式，保持两个入口的一致性与连贯感。通过统一的字号、间距与色彩，降低用户在不同入口之间的认知负担。

功能是如何实现的：

分点1：`renderRegister()` 构建注册表单并绑定提交，模拟生成用户，随后返回首页并刷新认证区。该实现以最小可行交互完成新用户加入流程，并与后续个人中心能力对接。

代码位置：`assets/app.js:1111–1156`

```javascript
form.on('submit',function(e){ e.preventDefault(); currentUser={ id:'user_123', name:'梁升富', email:'LiangShengFu_2023152006@university.edu', avatar:'assets/img/avatar.jpg', role:'student' }; setView(ViewState.HOME); renderAuth(); });
```

### 2.9 个人中心（profile.html）

结构是如何实现的：

分点1：顶部封面与信息头采用覆盖式布局，头像以圆形边框强调个人身份，右侧为姓名、账号与学院信息，以及行为按钮（编辑、分享、退出），构成个人信息的集中展示与管理入口。

代码位置：`assets/app.js:1158–1214`

```javascript
var cover=$('<div class="position-relative" style="height:260px;overflow:hidden"></div>'); cover.append('<img src="assets/img/hero-bg.jpg" style="width:100%;height:100%;object-fit:cover">'); cover.append('<div class="position-absolute" style="inset:0;background:linear-gradient(to top,rgba(0,0,0,.6),transparent)"></div>');
var info=$('<div class="container position-relative" style="margin-top:-64px"></div>');
var row=$('<div class="d-flex align-items-end gap-3"></div>');
row.append('<img src="'+currentUser.avatar+'" class="rounded-circle border" style="width:120px;height:120px;border:6px solid #fff">');
```

分点2：统计条以“参与活动/收藏活动/社区声望”为三项指标，居左排列并使用数值+小标题组合，形成快速的行为概览。下方标签页以四个按钮切换不同内容容器，采用边框底线与置顶间距构建清晰的信息层级。

代码位置：`assets/app.js:1215–1245,1230–1245`

```javascript
var statWrap=$('<div class="container border-bottom py-3 mb-3"></div>');
statWrap.append('<div class="d-flex gap-4"><div><div class="fs-4 fw-bold">'+myEvents.length+'</div><div class="text-secondary small">参与活动</div></div><div><div class="fs-4 fw-bold">'+myFavs.length+'</div><div class="text-secondary small">收藏活动</div></div><div><div class="fs-4 fw-bold">980</div><div class="text-secondary small">社区声望</div></div></div>');
var tabs=$('<div class="container d-flex gap-4 border-bottom"></div>'); var t1=$('<button class="btn btn-link fw-bold">我的活动 ('+myEvents.length+')</button>'); var t2=$('<button class="btn btn-link fw-bold">收藏 ('+myFavs.length+')</button>'); var t3=$('<button class="btn btn-link fw-bold">动态与评论</button>'); var t4=$('<button class="btn btn-link fw-bold">荣誉徽章</button>');
```

样式是如何实现的：

分点1：个人页标题与弱文本在 `#profile-wrap` 下进行覆盖式强化，使用更高的字重与尺寸，保证在浅色背景下的稳定可读性，形成与其他页面的视觉差异化。

代码位置：`assets/styles.css:390–416`

```css
.profile-name{color:#111;font-size:2.2rem;letter-spacing:-.01em}
.profile-handle{color:#333;font-weight:600}
#profile-wrap h2.fw-bold{color:#000 !important;font-size:2.4rem;letter-spacing:-.01em}
#profile-wrap .text-muted{color:#000 !important;font-weight:700}
```

功能是如何实现的：

分点1：四个标签页分别渲染“我的活动”“我的收藏”“动态与评论”“荣誉徽章”。列表均复用卡片组件，点击卡片进入详情；动态与评论使用轻卡片流式排列；徽章以网格卡片展示，包含图标、名称与描述。

代码位置：`assets/app.js:1247–1376`

```javascript
t1.on('click',showAct); t2.on('click',showFav); t3.on('click',showMoments); t4.on('click',showBadges); showAct();
```

### 2.10 意见反馈（feedback.html）

结构是如何实现的：

分点1：反馈页以居中的卡片容器承载表单，卡片周围留出充足留白与外阴影，形成轻盈且聚焦的视觉。卡片内部采用段落化分组，先选择反馈类型、再填写标题与详细描述，最后附联系方式与提交按钮。

代码位置：结构容器 `feedback.html:56–60`

```html
<div class="row g-4 justify-content之间"><div class="col-lg-8 mx-auto"><div id="feedback-form-wrap"></div></div></div>
```

样式是如何实现的：

分点1：分段选择器以 `seg-item/seg-card` 实现点击态与选中态，轻边框与浅灰背景提升触感反馈；输入框与文本域采用软糖风格 `input-soft/textarea-soft`，获得温和的视觉表达并降低认知负担；提交按钮 `btn-apple` 使用品牌蓝色强化主行动。

代码位置：`assets/styles.css:418–492`

```css
.seg-item{position:relative;display:block}
.seg-input{position:absolute;opacity:0;pointer-events:none}
.seg-card{padding:.75rem 1rem;border:1px solid #e5e7eb;border-radius:12px;background:#f9fafb;text-align:center;font-size:.9rem;font-weight:600;color:#6b7280;transition:all .15s}
.seg-item .seg-input:checked + .seg-card{background:#000;color:#fff;border-color:#000}
.input-soft,.textarea-soft{width:100%;padding:1rem;border-radius:12px;background:#f5f5f7;border:1px solid transparent;transition:all .15s;color:#111}
.btn-apple{background:#0071e3;color:#fff;border:none}
```

功能是如何实现的：

分点1：`renderFeedback()` 构建类型选择的 2×2 网格，并为首项设置默认选中；随后依次渲染标题、详细描述与联系方式输入，再在底部追加宽幅主按钮与处理提示。表单提交按钮目前以前端模拟为主，便于后续接入后端。

代码位置：`assets/app.js:1445–1485`

```javascript
var types=['功能建议','Bug 报告','活动投诉','其他']; var group=$('<div class="row g-2"></div>'); types.forEach(function(t,i){ var col=$('<div class="col-6 col-md-3"></div>'); var label=$('<label class="seg-item w-100"></label>'); var input=$('<input type="radio" name="fb-type" class="seg-input" value="'+t+'">'); if(i===0){ input.attr('checked',true); } var seg=$('<div class="seg-card">'+t+'</div>'); label.append(input).append(seg); col.append(label); group.append(col); });
form.append('<label class="form-label fw-semibold">标题</label><input type="text" class="input-soft mb-3" placeholder="简要描述您的问题">');
form.append('<label class="form-label fw-semibold">详细描述</label><textarea rows="6" class="textarea-soft mb-3" placeholder="请详细描述您遇到的情况或建议..."></textarea>');
form.append('<label class="form-label fw-semibold">联系方式 <span class="text-secondary">(选填)</span></label><input type="text" class="input-soft mb-4" placeholder="邮箱或电话，方便我们联系您">');
form.append('<button class="w-100 py-3 btn btn-apple btn-pill shadow-soft">提交反馈</button><div class="text-center text-secondary small mt-2">我们通常会在 24 小时内阅读并处理您的反馈。</div>');
```

### 2.9、登录实现（login.html）

#### 2.9.1、结构（不少于100字）
登录页采用半屏视觉 + 居中表单的两段式结构：左侧为品牌视觉与文案引导，右侧在垂直居中容器中呈现登录表单。顶部固定深色导航保持与全站一致的入口与搜索区域，底部页脚提供次级链接与反馈入口。该结构在大屏上强调沉浸感与引导性，在小屏上视觉区自动隐藏，仅保留核心表单，从而减少滚动与分心，确保用户以最少的操作完成登录。

对应代码（HTML）：

```html
<section id="view-LOGIN" class="d-block">
  <div class="d-flex min-vh-100">
    <div class="d-none d-lg-block half-visual">
      <img src="assets/img/login-bg.jpg" class="visual-img" alt="">
      <div class="visual-gradient"></div>
      <div class="visual-caption container">
        <h2 class="display-5 text-light fw-bold mb-3">探索无限可能。</h2>
        <p class="lead text-light-50">CampusHub 是连接你与校园精彩活动的桥梁。立即登录，开启你的专属旅程。</p>
      </div>
    </div>
    <div class="flex-grow-1 d-flex align-items-center">
      <div class="container" id="login-form-wrap"></div>
    </div>
  </div>
  </section>
```

#### 2.9.2、CSS样式（不少于100字）
视觉区通过半透明背景图与自下而上的渐变叠层提升文案对比度，`half-visual` 控制宽度与最小高度，保证在全高视窗中维持稳定构图；`visual-img` 采用 `object-fit:cover` 与轻度不透明处理减少干扰；`visual-gradient` 在底部增强文字可读性。表单控件统一圆角与阴影，按钮使用品牌色与胶囊形态，兼顾可读性与可点击性，整体风格与首页保持一致以降低认知成本。

对应代码（CSS）：

```css
.half-visual{position:relative;width:50%;background:#111;min-height:100vh}
.visual-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.5}
.visual-gradient{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(0,0,0,.9),transparent);height:50%}
```

#### 2.9.3、功能实现（不少于100字）
`renderLogin()` 以声明式方式构建登录表单，包含学号/邮箱与密码输入，并在“立即注册”链接上绑定切换至注册视图的交互。提交时在无后端条件下模拟生成 `currentUser`，随后切换到首页并调用 `renderAuth()` 刷新导航区认证态（头像或登录/注册按钮），保证跨页状态一致。该实现演示了前端认证的最小闭环：构建表单、采集输入、更新内存状态并联动导航与视图切换。

对应代码（JS）：

```javascript
function renderLogin(){
  var wrap = $("#login-form-wrap");
  wrap.empty();
  var box = $('<div class="mx-auto" style="max-width:480px"></div>');
  box.append('<h1 class="fw-bold">欢迎回来</h1><p class="text-muted">请输入您的账号信息以继续。</p>');
  var form = $("<form></form>");
  form.append('<label class="form-label fw-semibold">学号 / 邮箱</label><input type="text" class="form-control rounded-3 mb-2" placeholder="请输入您的学号" required>');
  form.append('<div class="d-flex justify-content-between align-items-center"><label class="form-label fw-semibold mb-0">密码</label><a href="#" class="small text-primary">忘记密码?</a></div><input type="password" class="form-control rounded-3 mb-3" placeholder="••••••••" required>');
  var btn = $('<button type="submit" class="btn btn-primary rounded-pill w-100">登录</button>');
  form.append(btn);
  box.append(form);
  box.append('<div class="mt-3 text-center text-muted">还没有账号? <button class="btn btn-link p-0" id="to-register">立即注册</button></div>');
  wrap.append(box);
  $("#to-register").on("click", function(){ setView(ViewState.REGISTER); });
  form.on("submit", function(e){
    e.preventDefault();
    currentUser = { id:'user_123', name:'梁升富', email:'LiangShengFu_2023152006@university.edu', avatar:'assets/img/avatar.jpg', role:'student' };
    setView(ViewState.HOME);
    renderAuth();
  });
}
```

### 2.10、注册实现（register.html）

#### 2.10.1、结构（不少于100字）
注册页结构与登录页保持对称：左侧复用品牌视觉（背景图 + 渐变 +文案），右侧为居中注册表单容器。表单包含姓名、学号、校园邮箱与密码四项核心字段，前两项以两列网格排列，减少纵向滚动与改善对齐性。顶部导航与底部页脚与全站一致，确保用户从登录页跳转至注册页时视觉与操作逻辑保持连贯，降低入口间的学习成本。

对应代码（HTML）：

```html
<section id="view-REGISTER" class="d-block">
  <div class="d-flex min-vh-100">
    <div class="d-none d-lg-block half-visual">
      <img src="assets/img/register-bg.jpg" class="visual-img" alt="" />
      <div class="visual-gradient"></div>
      <div class="visual-caption container">
        <h2 class="display-5 text-light fw-bold mb-3">加入社区。</h2>
        <p class="lead text-light-50">创建您的 CampusHub 账户，立即开始组织、参与和分享精彩的校园活动。</p>
      </div>
    </div>
    <div class="flex-grow-1 d-flex align-items-center">
      <div class="container" id="register-form-wrap"></div>
    </div>
  </div>
</section>
```

#### 2.10.2、CSS样式（不少于100字）
注册页沿用登录页的视觉系统以保持两个入口统一：`half-visual` 控制视觉宽度与高度；`visual-img` 保证背景覆盖并通过不透明度减弱干扰；`visual-gradient` 在底部提供从深到浅的过渡以提升标题与说明文案的对比度。表单控件使用圆角、合理的间距与字号，主按钮采用深色或品牌色，与登录按钮形成对称关系，提升整体一致性与操作可发现性。

对应代码（CSS）：

```css
.half-visual{position:relative;width:50%;background:#111;min-height:100vh}
.visual-img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.5}
.visual-gradient{position:absolute;bottom:0;left:0;right:0;background:linear-gradient(to top,rgba(0,0,0,.9),transparent);height:50%}
```

#### 2.10.3、功能实现（不少于100字）
`renderRegister()` 构建表单并绑定提交事件：采集姓名、学号、邮箱与密码后，前端模拟创建 `currentUser`，随后切换到首页并调用 `renderAuth()` 更新导航状态。另提供“直接登录”链接，便于从注册页快速返回登录页。该实现遵循渐进式增强原则：在无后端的演示环境中完成从注册到已登录的最小闭环，后续可无缝对接后端接口改为真实持久化。

对应代码（JS）：

```javascript
function renderRegister(){
  var wrap = $("#register-form-wrap");
  wrap.empty();
  var box = $('<div class="mx-auto" style="max-width:520px"></div>');
  box.append('<h1 class="fw-bold">创建账户</h1><p class="text-muted">填写以下信息以完成注册。</p>');
  var form = $("<form></form>");
  var row = $('<div class="row g-3"></div>');
  row.append('<div class="col-md-6"><label class="form-label fw-semibold">姓名</label><input type="text" class="form-control rounded-3" placeholder="张三"></div>');
  row.append('<div class="col-md-6"><label class="form-label fw-semibold">学号</label><input type="text" class="form-control rounded-3" placeholder="10位学号"></div>');
  form.append(row);
  form.append('<label class="form-label fw-semibold">校园邮箱</label><input type="email" class="form-control rounded-3 mb-2" placeholder="name@university.edu">');
  form.append('<label class="form-label fw-semibold">设置密码</label><input type="password" class="form-control rounded-3 mb-3" placeholder="至少8位字符">');
  form.append('<button type="submit" class="btn btn-dark rounded-pill w-100">立即注册</button>');
  box.append(form);
  box.append('<div class="mt-3 text-center text-muted">已有账号? <button class="btn btn-link p-0" id="to-login">直接登录</button></div>');
  wrap.append(box);
  $("#to-login").on("click", function(){ setView(ViewState.LOGIN); });
  form.on("submit", function(e){
    e.preventDefault();
    currentUser = { id:'user_123', name:'梁升富', email:'LiangShengFu_2023152006@university.edu', avatar:'assets/img/avatar.jpg', role:'student' };
    setView(ViewState.HOME);
    renderAuth();
  });
}
```

## 3．项目总结

本次课程项目从零到一构建了一个功能相对完备的校园活动管理平台。整个过程不仅是对课堂所学Web开发知识的一次全面检验和实践，更是一次关于产品设计、用户体验和工程思维的深度探索。

在项目架构上，我们选择了一条务实的路线。在没有引入重型前端框架的前提下，通过原生JavaScript和 `localStorage` 构建了一套轻量级的状态管理和导航机制，成功地在多页面应用中模拟出了单页面应用的流畅体验。这种设计虽然在复杂性上有所妥协，但换来了极低的上手门槛和高度的灵活性，证明了即使是基础技术，只要巧妙组合，也能构建出交互完善的现代化应用。

**项目挑战与解决方案**：
*   **挑战一：跨页面的状态一致性**。这是本次项目的核心难题。我们最终通过设计统一的 `navigate` 函数，强制在每次页面跳转前执行 `saveState` 操作，形成了一个“修改-保存-跳转”的原子操作流程，有效地保证了数据在不同视图间的同步。
*   **挑战二：响应式布局的精细化调试**。虽然Bootstrap提供了强大的栅格系统，但在处理特定组件（如导航栏、复杂的表单）在不同屏幕尺寸下的表现时，仍需编写大量的媒体查询（Media Queries）进行微调。我们通过反复在浏览器开发者工具中模拟不同设备，才最终打磨出较为理想的跨端体验。
*   **挑战三：前端性能优化**。在首页活动数量增多时，初版的渲染函数会导致页面卡顿。我们通过在渲染前进行数据过滤，以及未来可以引入的“虚拟列表”或“分页加载”等技术，来优化DOM操作的性能。

**心得体会与未来展望**：
通过这个项目，我深刻体会到“用户为中心”的设计思想是多么重要。一个功能的价值，不仅在于它能否实现，更在于它是否易用、好用。从搜索建议到ICS导出，这些看似微小的细节，恰恰是提升用户体验的关键。同时，我也认识到代码的模块化和规范化是项目能够持续迭代的基石。将不同页面的渲染逻辑封装在各自的 `render` 函数中，并由一个总的 `init` 函数统一调度，使得整个代码库结构清晰，易于维护。

展望未来，这个项目还有巨大的提升空间：
1.  **后端整合**：目前的数据存储在 `localStorage`，这只是一个前端模拟。下一步最关键的升级就是引入真正的后端服务（如 Node.js + Express）和数据库（如 MongoDB 或 MySQL），实现用户注册、活动数据的持久化存储和更复杂的权限管理。
2.  **实时交互**：引入 WebSocket 技术，可以实现活动评论的实时更新、报名人数的实时同步，甚至在线聊天功能，让平台更具社区属性。
3.  **个性化推荐**：在积累了足够的用户行为数据后，可以开发一套简单的推荐算法，根据用户的浏览历史、收藏和报名记录，为他们推荐可能感兴趣的活动。

总而言之，这次大作业是一次宝贵的综合性训练，它让我将理论知识真正落地为看得见、摸得着的产品，也让我对Web全栈开发的完整图景有了更深刻的理解。

---

## 4．主要源代码（节选）

以下为项目中部分核心功能的代码实现，以展示关键逻辑。

### 4.1 `assets/app.js` - 全局应用逻辑

这是整个项目的“大脑”，负责状态管理、导航、各页面渲染和事件绑定。

```javascript
// 全局视图状态枚举
var ViewState = {
    HOME: 'HOME',
    DETAIL: 'DETAIL',
    PUBLISH: 'PUBLISH',
    STATS: 'STATS',
    FEEDBACK: 'FEEDBACK',
    CALENDAR: 'CALENDAR',
    PROFILE: 'PROFILE',
    LOGIN: 'LOGIN',
    REGISTER: 'REGISTER'
};

// localStorage 键
var LS_EVENTS_KEY = 'campushub_events';
var LS_USER_KEY = 'campushub_user';

// 全局内存变量
var events = [];
var currentUser = null;
var filter = 'all';
var searchTerm = '';

/**
 * 从 localStorage 加载状态到内存
 */
function loadState() { /* ... 实现见上文 ... */ }

/**
 * 将内存中的活动数据保存到 localStorage
 */
function saveEvents() { /* ... 实现见上文 ... */ }

/**
 * 将内存中的用户数据保存到 localStorage
 */
function saveUser() { /* ... 实现见上文 ... */ }

/**
 * 统一的页面跳转函数
 * @param {string} view - 目标视图，来自 ViewState
 * @param {object} [params] - 附加参数，如 { id: '...' }
 */
function navigate(view, params) { /* ... 实现见上文 ... */ }

/**
 * 绑定所有导航元素的点击事件
 */
function bindNav() {
    $('.nav-item').off().on('click', function () {
        var v = $(this).data('view');
        navigate(v);
    });
    // ... 其他导航元素的绑定 ...
}

/**
 * 页面总初始化函数
 */
function init() {
    loadState(); // 1. 加载持久化状态
    bindNav();   // 2. 绑定通用导航
    
    var page = $('body').data('page') || 'HOME'; // 获取当前页面标识

    // 3. 根据页面标识，调用对应的渲染函数
    switch (page) {
        case ViewState.HOME:
            renderHome();
            break;
        case ViewState.DETAIL:
            renderDetail();
            break;
        case ViewState.STATS:
            renderStats();
            break;
        // ... 其他页面的 case ...
    }
}

// 当DOM加载完毕后，执行初始化
$(init);
```

### 4.2 `assets/styles.css` - 意见反馈页定制样式

为了展示UI定制能力，这里节选了为意见反馈页特别编写的CSS代码，以实现更现代、更友好的“卡片化”和“软糖”风格。

```css
/* assets/styles.css: 反馈页增强样式 */

/* 分段式选择器容器 */
.seg-card {
    display: flex;
    background-color: #f0f0f5;
    border-radius: 12px;
    padding: 5px;
    margin-bottom: 1.5rem;
}

/* 分段式选择器单个选项 */
.seg-card .seg-item {
    flex: 1;
    text-align: center;
    padding: 10px 15px;
    cursor: pointer;
    border-radius: 9px;
    transition: all 0.3s ease;
    font-weight: 500;
    color: #555;
}

/* 分段式选择器激活状态 */
.seg-card .seg-item.active {
    background-color: #ffffff;
    color: #000;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* 浅灰色、无边框的输入框样式 */
.input-soft, .textarea-soft {
    background-color: #f8f9fa;
    border: none;
    border-radius: 12px;
    padding: 15px 20px;
    font-size: 1rem;
    width: 100%;
    transition: box-shadow 0.2s ease;
}

.input-soft:focus, .textarea-soft:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
    background-color: #fff;
}

/* 仿苹果风格的蓝色提交按钮 */
.btn-apple {
    background-color: #007aff;
    color: white;
    font-weight: 600;
    border-radius: 12px;
    padding: 15px 25px;
    border: none;
    transition: background-color 0.2s ease;
}

.btn-apple:hover {
    background-color: #005ecb;
    color: white;
}
```

### 4.3 页面文件结构

项目的物理文件结构清晰地反映了其模块化的设计思想。

*   `index.html`（首页）
*   `detail.html`（活动详情）
*   `publish.html`（活动发布）
*   `stats.html`（统计分析）
*   `calendar.html`（活动日历）
*   `feedback.html`（意见反馈）
*   `login.html` / `register.html`（登录/注册）
*   `profile.html`（个人中心）
*   `assets/`
    *   `app.js` (核心逻辑)
    *   `styles.css` (全局及定制样式)
    *   `vendor/` (存放jQuery, Bootstrap, ECharts等第三方库)
    *   `images/` (存放项目图片资源)

---

> **说明**：以上为项目报告的详细阐述与关键代码节选。完整的项目源代码、资源文件及部署说明，请参见代码仓库。
