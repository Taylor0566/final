# 深圳大学课程项目报告

课程名称：Web开发及人机交互导论  
项目名称：期末大作业-校园活动管理平台  
学院：计算机与软件学院  
专业：计算机科学与技术（卓越班）  
任课教师：李俊杰  
报告人：梁升富  学号：2023152006  
提交时间：2025.12.31  

---

## 摘要
- 实现活动发布、展示与搜索提示
- 活动详情页：图文展示、评论区、报名/收藏、二维码分享与 ICS 导出
- 活动报名与个人中心：查看“我的活动”“收藏”活动
- 统计分析：基于 ECharts 的分布、趋势、排行与雷达图
- 活动日历：月视图、点击日格展示当日活动
- 意见反馈：卡片化表单、分段选择、移动端适配、页脚固定
- 响应式布局与统一导航：跨页面跳转、移动菜单
- 状态持久化：`localStorage` 保存事件与用户信息

---

## 1．网页页面结构规划与内容设计
- 顶部导航（统一样式）：首页、日历、发布、统计、反馈、个人中心；移动端折叠菜单
- 首页（`index.html`）：活动分类筛选、滚动宣传卡片、活动网格、搜索建议
- 详情页（`detail.html`）：海报、基本信息、图集、评论、报名/收藏、分享、ICS 导出
- 发布页（`publish.html`）：表单录入活动信息（标题/时间/地点/类型/人数/主办方/详情）
- 统计页（`stats.html`）：ECharts 可视化（饼图/折线/柱状/雷达）
- 日历页（`calendar.html`）：月历视图、当日活动列表
- 反馈页（`feedback.html`）：卡片化反馈表单（类型分段选择、标题、详细描述、联系方式），页脚固定
- 个人中心（`profile.html`）：封面、概览统计、我的活动、收藏、动态等模块
- 统一状态与导航：`assets/app.js` 中集中处理页面跳转与状态持久化

---

## 2．网页的实现（主要步骤与关键代码）

### 2.1 跨页面导航与状态持久化
- 视图枚举与状态键：`assets/app.js:1–8`
```js
var ViewState = { HOME: 'HOME', LOGIN: 'LOGIN', REGISTER: 'REGISTER', PROFILE: 'PROFILE', DETAIL: 'DETAIL', PUBLISH: 'PUBLISH', STATS: 'STATS', FEEDBACK: 'FEEDBACK', CALENDAR: 'CALENDAR' }
var LS_EVENTS_KEY = 'campushub_events'
var LS_USER_KEY = 'campushub_user'
```

- 载入与保存状态：`assets/app.js:24–26`
```js
function loadState() { try { var es = localStorage.getItem(LS_EVENTS_KEY); if (es) { events = JSON.parse(es) } } catch (e) { } try { var us = localStorage.getItem(LS_USER_KEY); if (us) { currentUser = JSON.parse(us) } } catch (e) { } }
function saveEvents() { try { localStorage.setItem(LS_EVENTS_KEY, JSON.stringify(events)) } catch (e) { } }
function saveUser() { try { if (currentUser) { localStorage.setItem(LS_USER_KEY, JSON.stringify(currentUser)) } else { localStorage.removeItem(LS_USER_KEY) } } catch (e) { } }
```

- 跨页面跳转（附带参数与锚点）：`assets/app.js:27–28`
```js
function navigate(view, params) { var map = { HOME: 'index.html', LOGIN: 'login.html', REGISTER: 'register.html', PROFILE: 'profile.html', DETAIL: 'detail.html', PUBLISH: 'publish.html', STATS: 'stats.html', FEEDBACK: 'feedback.html', CALENDAR: 'calendar.html' }; var url = map[view] || 'index.html'; if (view === ViewState.DETAIL && params && params.id) { url += '?id=' + encodeURIComponent(params.id) } if (view === ViewState.HOME && params && params.anchor === 'activities') { url += '#activities' } saveUser(); saveEvents(); window.location.href = url }
```

### 2.2 导航绑定与搜索提示
- 导航与移动菜单：`assets/app.js:33`
```js
function bindNav() { $('.nav-item').off().on('click', function () { var v = $(this).data('view'); var anchor = $(this).data('anchor'); if (anchor === 'activities') { navigate(ViewState.HOME, { anchor: 'activities' }) } else { navigate(v) } }); $('#footer-feedback').off().on('click', function () { navigate(ViewState.FEEDBACK) }); $('#mobile-menu-btn').off().on('click', function () { $('#mobile-menu').toggleClass('d-none') }); }
```

- 搜索联想下拉：`assets/app.js:34–35`
```js
function updateSearchInput() { var term = searchTerm.toLowerCase(); var list = events.filter(function (e) { return e.title.toLowerCase().indexOf(term) > -1 || e.category.indexOf(term) > -1 }).slice(0, 5); var box = $('#search-suggest'); box.empty(); if (term && list.length) { list.forEach(function (ev) { var item = $('<div class="suggest-item"></div>'); item.append('<div style="width:32px;height:32px;border-radius:8px;overflow:hidden"><img src="' + ev.imageUrl + '" style="width:32px;height:32px;object-fit:cover"></div>'); item.append('<div class="flex-grow-1"><div>' + ev.title + '</div><div class="text-secondary" style="font-size:12px">' + ev.date.split('T')[0] + '</div></div>'); item.on('click', function () { navigate(ViewState.DETAIL, { id: ev.id }); $('#search-input').val(''); searchTerm = ''; box.addClass('d-none') }); box.append(item) }); box.removeClass('d-none') } else { box.addClass('d-none') } }
```

### 2.3 首页活动展示与筛选
- 分类筛选与网格展示：`assets/app.js:37`
```js
function renderHome() { var cf = $('#category-filter'); cf.empty(); ['all','academic','arts','sports','social'].forEach(function (cat) { var txt = cat==='all'?'全部':cat==='academic'?'学术':cat==='arts'?'艺术':cat==='sports'?'体育':'社交'; var active = filter===cat; var btn = $('<button class="btn btn-pill '+(active?'btn-dark':'btn-light')+'"></button>'); btn.text(txt); btn.on('click', function(){ filter=cat; renderHome() }); cf.append(btn) }); var grid = $('#event-grid'); grid.empty(); var term = searchTerm.toLowerCase(); var filtered = events.filter(function(e){ var m=(e.title.toLowerCase().indexOf(term)>-1||e.description.toLowerCase().indexOf(term)>-1); var c=(filter==='all'||e.category===filter); return m&&c }); /* 逐卡片渲染与点击跳详情 */ }
```

### 2.4 活动详情页与互动
- URL 解析 `id`、图文展示、评论、报名/收藏、分享、ICS：`assets/app.js:38`
```js
function renderDetail() { /* 解析 ?id=... */ /* 海报、标题、时间地点、图集 */ /* 评论列表与发表评论 */ /* 报名/收藏按钮更新 events 并持久化 */ /* Web Share 或二维码分享；ICS 文件生成导出 */ }
```

### 2.5 活动发布
- 发布表单（标题/时间/地点/类型/人数/主办方/详情）：`assets/app.js:39`
```js
function renderPublish() { var form = $('<form class="mt-3"></form>'); /* 各输入项 */ form.on('submit', function(e){ e.preventDefault(); var newEvent={ id:Date.now()+"", /* 读取表单值 */ attendees:0, comments:[], registeredUsers:[], favoritedUsers:[] }; events=[newEvent].concat(events); saveEvents(); navigate(ViewState.HOME) }) }
```

### 2.6 数据可视化（ECharts）
- 饼图/折线/柱状/雷达：`assets/app.js:40`
```js
function renderStats(){ var pie=echarts.init(document.getElementById('echarts-pie')); pie.setOption({ series:[{ type:'pie', /* ... */ }] }); var line=echarts.init(document.getElementById('echarts-line')); line.setOption({ series:[{ type:'line', /* ... */ }] }); var bar=echarts.init(document.getElementById('echarts-bar')); bar.setOption({ series:[{ type:'bar', /* ... */ }] }); var radar=echarts.init(document.getElementById('echarts-radar')); radar.setOption({ series:[{ type:'radar', /* ... */ }] }); }
```

### 2.7 登录 / 注册 / 注销与个人中心
- 登录/注册渲染与导航：`assets/app.js:41–42`
```js
function renderLogin(){ /* 表单构建与提交后保存用户、跳首页 */ }
function renderRegister(){ /* 表单构建与提交后保存用户、跳首页 */ }
```

- 个人中心：我的活动/收藏卡片点击进入详情：`assets/app.js:43–45`
```js
function renderProfile(){ /* 封面信息、概览统计、标签页；卡片点击 navigate(ViewState.DETAIL,{id:ev.id}) */ }
```

### 2.8 意见反馈（卡片化样式）
- 表单卡片、分段选择、浅灰输入、苹果蓝按钮：`assets/app.js:51`; 配套样式：`assets/styles.css:74–88`
```js
function renderFeedback(){ var card=$('<div class="bg-white rounded-2xl shadow-soft p-4 p-md-5 animate-fade-in"></div>'); var form=$('<form></form>'); /* 分段选择 + 标题 + 详细描述 + 联系方式 + 提交按钮 */ card.append(form); $('#feedback-form-wrap').empty().append(card) }
```

### 2.9 活动日历
- 月历视图与当日活动列表：`assets/app.js:52`
```js
function renderCalendar(){ /* 头部导航、月份切换、网格渲染、当日活动列表 */ }
```

### 2.10 统一初始化
- 根据 `body[data-page]` 渲染对应视图：`assets/app.js:57–58`
```js
function init(){ loadState(); bindNav(); renderAuth(); bindSearch(); var page=$('body').data('page')||'HOME'; if(page===ViewState.HOME){ renderHome() } else if(page===ViewState.DETAIL){ renderDetail() } else if(page===ViewState.PUBLISH){ renderPublish() } else if(page===ViewState.STATS){ renderStats() } else if(page===ViewState.LOGIN){ renderLogin() } else if(page===ViewState.REGISTER){ renderRegister() } else if(page===ViewState.PROFILE){ renderProfile() } else if(page===ViewState.FEEDBACK){ renderFeedback() } else if(page===ViewState.CALENDAR){ renderCalendar() } }
$(init)
```

---

## 3．项目总结
- 架构简洁：以多页面结构承载各模块，统一导航与状态管理，降低耦合度
- 交互完善：搜索提示、报名/收藏、评论与分享、日历与 ICS 导出提升使用体验
- 可视化直观：ECharts 图表提供分布、趋势、排行与维度分析，辅助决策
- 响应式与移动适配：Bootstrap 栅格与移动菜单保证良好跨端体验
- 可扩展性：状态持久化与模块化渲染便于后续接入后端或增强推荐算法

---

## 4．主要源代码（节选）

### 4.1 `assets/app.js`
```js
/* ViewState、loadState/saveEvents/saveUser、navigate、bindNav、updateSearchInput */
/* renderHome、renderDetail、renderPublish、renderStats、renderLogin、renderRegister、renderProfile、renderFeedback、renderCalendar、init */
```

关键位置引用：
- 视图与状态持久化：`assets/app.js:1–8`, `assets/app.js:24–26`
- 跨页跳转：`assets/app.js:27–28`
- 导航与搜索：`assets/app.js:33–35`
- 各视图渲染：`assets/app.js:37–52`, `assets/app.js:57–58`

### 4.2 `assets/styles.css`
```css
/* 主题色、导航、卡片、动画、日历网格 */
/* 反馈页增强样式：seg-card/input-soft/textarea-soft/btn-apple 等 */
```
引用：`assets/styles.css:1–73`, `assets/styles.css:74–88`

### 4.3 页面文件
- `index.html`（首页）
- `detail.html`（活动详情）
- `publish.html`（活动发布）
- `stats.html`（统计分析）
- `calendar.html`（活动日历）
- `feedback.html`（意见反馈，页脚固定）
- `login.html`（登录）
- `register.html`（注册）
- `profile.html`（个人中心）

---

> 说明：以上为关键实现与主文件节选，完整源代码请见仓库对应路径文件。本文档用于期末项目报告提交与课堂演示。

